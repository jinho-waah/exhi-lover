{"ast":null,"code":"import _regeneratorRuntime from\"/Users/andrew/Desktop/exhi/exhi/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/andrew/Desktop/exhi/exhi/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/andrew/Desktop/exhi/exhi/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import axios from\"axios\";import{fetchAllShows,fetchShowByShowId,fetchShowIdByTagId,fetchTagsIdbyShowId}from\"../../lib/api/Api\";function IdToShow(_ref){var TagItems=_ref.TagItems;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),shows=_useState2[0],setShows=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),tags=_useState4[0],setTags=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){var tagIdString=TagItems.join(\"&\");var fetchShows=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var showsIds,tagsId,getShowResponse,show,_showsIds,_tagsId;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(tagIdString!==\"\")){_context.next=21;break;}_context.prev=1;setError(null);_context.next=5;return fetchShowIdByTagId(tagIdString);case 5:showsIds=_context.sent;_context.next=8;return fetchTagsIdbyShowId(showsIds);case 8:tagsId=_context.sent;setTags(tagsId);_context.next=12;return fetchShowByShowId(showsIds);case 12:getShowResponse=_context.sent;setShows(getShowResponse);_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](1);setError(_context.t0);case 19:_context.next=30;break;case 21:_context.next=23;return fetchAllShows();case 23:show=_context.sent;_showsIds=show.map(function(show){return show.id;}).join(\"&\");_context.next=27;return fetchTagsIdbyShowId(_showsIds);case 27:_tagsId=_context.sent;setShows(show);setTags(_tagsId);case 30:case\"end\":return _context.stop();}}},_callee,null,[[1,16]]);}));return function fetchShows(){return _ref2.apply(this,arguments);};}();fetchShows();},[TagItems]);return{shows:shows,tags:tags};}export default IdToShow;","map":{"version":3,"names":["useState","useEffect","axios","fetchAllShows","fetchShowByShowId","fetchShowIdByTagId","fetchTagsIdbyShowId","IdToShow","TagItems","shows","setShows","tags","setTags","error","setError","tagIdString","join","fetchShows","showsIds","tagsId","getShowResponse","show","map","id"],"sources":["/Users/andrew/Desktop/exhi/exhi/client/src/component/hashtag/IdToShow.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport {\n  fetchAllShows,\n  fetchShowByShowId,\n  fetchShowIdByTagId,\n  fetchTagsIdbyShowId,\n} from \"../../lib/api/Api\";\n\nfunction IdToShow({ TagItems }) {\n  const [shows, setShows] = useState(null);\n  const [tags, setTags] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const tagIdString = TagItems.join(\"&\");\n    const fetchShows = async () => {\n      if (tagIdString !== \"\") {\n        try {\n          setError(null);\n          const showsIds = await fetchShowIdByTagId(tagIdString);\n          const tagsId = await fetchTagsIdbyShowId(showsIds);\n          setTags(tagsId);\n          const getShowResponse = await fetchShowByShowId(showsIds);\n          setShows(getShowResponse);\n        } catch (e) {\n          setError(e);\n        }\n      } else {\n        const show = await fetchAllShows();\n        const showsIds = show.map((show) => show.id).join(\"&\");\n        const tagsId = await fetchTagsIdbyShowId(showsIds);\n        setShows(show);\n        setTags(tagsId);\n      }\n    };\n\n    fetchShows();\n  }, [TagItems]);\n\n  return { shows, tags };\n}\n\nexport default IdToShow;\n"],"mappings":"oYAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OACEC,aADF,CAEEC,iBAFF,CAGEC,kBAHF,CAIEC,mBAJF,KAKO,mBALP,CAOA,QAASC,SAAT,MAAgC,IAAZC,SAAY,MAAZA,QAAY,CAC9B,cAA0BR,QAAQ,CAAC,IAAD,CAAlC,wCAAOS,KAAP,eAAcC,QAAd,eACA,eAAwBV,QAAQ,CAAC,IAAD,CAAhC,yCAAOW,IAAP,eAAaC,OAAb,eACA,eAA0BZ,QAAQ,CAAC,IAAD,CAAlC,yCAAOa,KAAP,eAAcC,QAAd,eAEAb,SAAS,CAAC,UAAM,CACd,GAAMc,YAAW,CAAGP,QAAQ,CAACQ,IAAT,CAAc,GAAd,CAApB,CACA,GAAMC,WAAU,6FAAG,qMACbF,WAAW,GAAK,EADH,2CAGbD,QAAQ,CAAC,IAAD,CAAR,CAHa,sBAIUT,mBAAkB,CAACU,WAAD,CAJ5B,QAIPG,QAJO,qCAKQZ,oBAAmB,CAACY,QAAD,CAL3B,QAKPC,MALO,eAMbP,OAAO,CAACO,MAAD,CAAP,CANa,uBAOiBf,kBAAiB,CAACc,QAAD,CAPlC,SAOPE,eAPO,eAQbV,QAAQ,CAACU,eAAD,CAAR,CARa,iFAUbN,QAAQ,aAAR,CAVa,8DAaIX,cAAa,EAbjB,SAaTkB,IAbS,eAcTH,SAdS,CAcEG,IAAI,CAACC,GAAL,CAAS,SAACD,IAAD,QAAUA,KAAI,CAACE,EAAf,EAAT,EAA4BP,IAA5B,CAAiC,GAAjC,CAdF,wBAeMV,oBAAmB,CAACY,SAAD,CAfzB,SAeTC,OAfS,eAgBfT,QAAQ,CAACW,IAAD,CAAR,CACAT,OAAO,CAACO,OAAD,CAAP,CAjBe,qEAAH,kBAAVF,WAAU,2CAAhB,CAqBAA,UAAU,GACX,CAxBQ,CAwBN,CAACT,QAAD,CAxBM,CAAT,CA0BA,MAAO,CAAEC,KAAK,CAALA,KAAF,CAASE,IAAI,CAAJA,IAAT,CAAP,CACD,CAED,cAAeJ,SAAf"},"metadata":{},"sourceType":"module"}