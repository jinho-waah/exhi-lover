{"ast":null,"code":"\"use client\"; // src/useMutationState.ts\n\nimport _objectSpread from \"/Users/andrew/Desktop/exhi/exhi/exhi-lover/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport * as React from \"react\";\nimport { notifyManager, replaceEqualDeep } from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\n\nfunction useIsMutating(filters, queryClient) {\n  var client = useQueryClient(queryClient);\n  return useMutationState({\n    filters: _objectSpread(_objectSpread({}, filters), {}, {\n      status: \"pending\"\n    })\n  }, client).length;\n}\n\nfunction getResult(mutationCache, options) {\n  return mutationCache.findAll(options.filters).map(function (mutation) {\n    return options.select ? options.select(mutation) : mutation.state;\n  });\n}\n\nfunction useMutationState() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var queryClient = arguments.length > 1 ? arguments[1] : undefined;\n  var mutationCache = useQueryClient(queryClient).getMutationCache();\n  var optionsRef = React.useRef(options);\n  var result = React.useRef(null);\n\n  if (!result.current) {\n    result.current = getResult(mutationCache, options);\n  }\n\n  React.useEffect(function () {\n    optionsRef.current = options;\n  });\n  return React.useSyncExternalStore(React.useCallback(function (onStoreChange) {\n    return mutationCache.subscribe(function () {\n      var nextResult = replaceEqualDeep(result.current, getResult(mutationCache, optionsRef.current));\n\n      if (result.current !== nextResult) {\n        result.current = nextResult;\n        notifyManager.schedule(onStoreChange);\n      }\n    });\n  }, [mutationCache]), function () {\n    return result.current;\n  }, function () {\n    return result.current;\n  });\n}\n\nexport { useIsMutating, useMutationState };","map":{"version":3,"mappings":";;;AAGA,YAAYA,KAAZ,MAAuB,OAAvB;AAEA,SAASC,aAAT,EAAwBC,gBAAxB,QAAgD,sBAAhD;AACA,SAASC,cAAT,QAA+B,0BAA/B;;AASO,SAASC,aAAT,CACLC,OADK,EAELC,WAFK,EAGG;EACR,IAAMC,SAASJ,eAAeG,WAAf,CAAf;EACA,OAAOE,iBACL;IAAEH,yCAAcA,OAAd;MAAuBI,QAAQ;IAA/B;EAAF,CADK,EAELF,MAFK,EAGLG,MAHF;AAIF;;AAOA,SAASC,SAAT,CACEC,aADF,EAEEC,OAFF,EAGkB;EAChB,OAAOD,cACJE,OADI,CACID,QAAQR,OADZ,EAEJU,GAFI,CAGH,UAACC,QAAD;IAAA,OACGH,QAAQI,MAAR,GAAiBJ,QAAQI,MAAR,CAAeD,QAAf,CAAjB,GAA4CA,SAASE,KADxD;EAAA,CAHG,CAAP;AAMF;;AAEO,SAASV,gBAAT,GAGW;EAAA,IAFhBK,OAEgB,uEAFyB,EAEzB;EAAA,IADhBP,WACgB;EAChB,IAAMM,gBAAgBT,eAAeG,WAAf,EAA4Ba,gBAA5B,EAAtB;EACA,IAAMC,aAAmBpB,aAAOa,OAAP,CAAzB;EACA,IAAMQ,SAAerB,aAAuB,IAAvB,CAArB;;EACA,IAAI,CAACqB,OAAOC,OAAZ,EAAqB;IACnBD,OAAOC,OAAP,GAAiBX,UAAUC,aAAV,EAAyBC,OAAzB,CAAjB;EACF;;EAEMb,gBAAU,YAAM;IACpBoB,WAAWE,OAAX,GAAqBT,OAArB;EACD,CAFK;EAIN,OAAab,2BACLA,kBACJ,UAACuB,aAAD;IAAA,OACEX,cAAcY,SAAd,CAAwB,YAAM;MAC5B,IAAMC,aAAavB,iBACjBmB,OAAOC,OADU,EAEjBX,UAAUC,aAAV,EAAyBQ,WAAWE,OAApC,CAFiB,CAAnB;;MAIA,IAAID,OAAOC,OAAP,KAAmBG,UAAvB,EAAmC;QACjCJ,OAAOC,OAAP,GAAiBG,UAAjB;QACAxB,cAAcyB,QAAd,CAAuBH,aAAvB;MACF;IACD,CATD,CADF;EAAA,CADI,EAYJ,CAACX,aAAD,CAZI,CADK,EAeX;IAAA,OAAMS,OAAOC,OAAb;EAAA,CAfW,EAgBX;IAAA,OAAMD,OAAOC,OAAb;EAAA,CAhBW,CAAb;AAkBF","names":["React","notifyManager","replaceEqualDeep","useQueryClient","useIsMutating","filters","queryClient","client","useMutationState","status","length","getResult","mutationCache","options","findAll","map","mutation","select","state","getMutationCache","optionsRef","result","current","onStoreChange","subscribe","nextResult","schedule"],"sources":["/Users/andrew/node_modules/@tanstack/react-query/src/useMutationState.ts"],"sourcesContent":["/* eslint-disable react-compiler/react-compiler */\n\n'use client'\nimport * as React from 'react'\n\nimport { notifyManager, replaceEqualDeep } from '@tanstack/query-core'\nimport { useQueryClient } from './QueryClientProvider'\nimport type {\n  Mutation,\n  MutationCache,\n  MutationFilters,\n  MutationState,\n  QueryClient,\n} from '@tanstack/query-core'\n\nexport function useIsMutating(\n  filters?: MutationFilters,\n  queryClient?: QueryClient,\n): number {\n  const client = useQueryClient(queryClient)\n  return useMutationState(\n    { filters: { ...filters, status: 'pending' } },\n    client,\n  ).length\n}\n\ntype MutationStateOptions<TResult = MutationState> = {\n  filters?: MutationFilters\n  select?: (mutation: Mutation) => TResult\n}\n\nfunction getResult<TResult = MutationState>(\n  mutationCache: MutationCache,\n  options: MutationStateOptions<TResult>,\n): Array<TResult> {\n  return mutationCache\n    .findAll(options.filters)\n    .map(\n      (mutation): TResult =>\n        (options.select ? options.select(mutation) : mutation.state) as TResult,\n    )\n}\n\nexport function useMutationState<TResult = MutationState>(\n  options: MutationStateOptions<TResult> = {},\n  queryClient?: QueryClient,\n): Array<TResult> {\n  const mutationCache = useQueryClient(queryClient).getMutationCache()\n  const optionsRef = React.useRef(options)\n  const result = React.useRef<Array<TResult>>(null)\n  if (!result.current) {\n    result.current = getResult(mutationCache, options)\n  }\n\n  React.useEffect(() => {\n    optionsRef.current = options\n  })\n\n  return React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) =>\n        mutationCache.subscribe(() => {\n          const nextResult = replaceEqualDeep(\n            result.current,\n            getResult(mutationCache, optionsRef.current),\n          )\n          if (result.current !== nextResult) {\n            result.current = nextResult\n            notifyManager.schedule(onStoreChange)\n          }\n        }),\n      [mutationCache],\n    ),\n    () => result.current,\n    () => result.current,\n  )!\n}\n"]},"metadata":{},"sourceType":"module"}