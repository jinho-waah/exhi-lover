{"ast":null,"code":"import _slicedToArray from\"/Users/andrew/Desktop/exhi/exhi/exhi-lover/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from\"react\";import Marker from\"./Marker\";import icon from\"../../lib/icon/loc7.png\";import{jsx as _jsx}from\"react/jsx-runtime\";function KakaoMap(_ref){var lat=_ref.lat,lng=_ref.lng,showMarker=_ref.showMarker;var _useState=useState((window.innerWidth>=560?560:window.innerWidth)*1.1),_useState2=_slicedToArray(_useState,2),mapHeight=_useState2[0],setMapHeight=_useState2[1];// const mapHeight = (window.innerWidth >= 560 ? 560 : window.innerWidth) * 1.1;\nvar mapContainer=useRef(null);var galleriesMarker=Marker();var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedMarker=_useState4[0],setSelectedMarker=_useState4[1];var imageSize=new window.kakao.maps.Size(35,35);var galleryMarkerImage=new window.kakao.maps.MarkerImage(icon,imageSize);var mapOptions={center:new window.kakao.maps.LatLng(lat,lng),level:7};useEffect(function(){var map=new window.kakao.maps.Map(mapContainer.current,mapOptions);if(showMarker){var markerPosition=new window.kakao.maps.LatLng(lat,lng);var marker=new window.kakao.maps.Marker({map:map,position:markerPosition});}galleriesMarker.forEach(function(galleryMarker){var setGalleryMarker=new window.kakao.maps.Marker({map:map,position:new window.kakao.maps.LatLng(galleryMarker.latlng.lat,galleryMarker.latlng.lng),image:galleryMarkerImage});window.kakao.maps.event.addListener(setGalleryMarker,\"click\",function(){setMapHeight((window.innerWidth>=560?560:window.innerWidth)*1.1/3);var overlayContent=\"<div class=\\\"close\\\" onClick={closeOverlay()} title=\\\"\\uB2EB\\uAE30\\\">\\uB2EB\\uAE30</div>\";var overlay=new window.kakao.maps.CustomOverlay({map:map,content:overlayContent,position:setGalleryMarker.getPosition()});var closeOverlay=function closeOverlay(){overlay.setMap(null);setSelectedMarker(null);setMapHeight((window.innerWidth>=560?560:window.innerWidth)*1.1);};window.closeOverlay=closeOverlay;console.log(setGalleryMarker.getPosition());map.panTo(setGalleryMarker.getPosition());});});},[lat,lng,showMarker]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{id:\"map\",ref:mapContainer,style:{width:\"100%\",height:\"\".concat(mapHeight,\"px\")}})});}export default/*#__PURE__*/React.memo(KakaoMap);","map":{"version":3,"names":["React","useEffect","useRef","useState","Marker","icon","KakaoMap","lat","lng","showMarker","window","innerWidth","mapHeight","setMapHeight","mapContainer","galleriesMarker","selectedMarker","setSelectedMarker","imageSize","kakao","maps","Size","galleryMarkerImage","MarkerImage","mapOptions","center","LatLng","level","map","Map","current","markerPosition","marker","position","forEach","galleryMarker","setGalleryMarker","latlng","image","event","addListener","overlayContent","overlay","CustomOverlay","content","getPosition","closeOverlay","setMap","console","log","panTo","width","height","memo"],"sources":["/Users/andrew/Desktop/exhi/exhi/exhi-lover/client/src/component/map/KakaoMap.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport Marker from \"./Marker\";\nimport icon from \"../../lib/icon/loc7.png\";\n\nfunction KakaoMap({ lat, lng, showMarker }) {\n  const [mapHeight, setMapHeight] = useState(\n    (window.innerWidth >= 560 ? 560 : window.innerWidth) * 1.1\n  );\n  // const mapHeight = (window.innerWidth >= 560 ? 560 : window.innerWidth) * 1.1;\n  const mapContainer = useRef(null);\n\n  const galleriesMarker = Marker();\n  const [selectedMarker, setSelectedMarker] = useState(null);\n\n  const imageSize = new window.kakao.maps.Size(35, 35);\n  const galleryMarkerImage = new window.kakao.maps.MarkerImage(icon, imageSize);\n\n  const mapOptions = {\n    center: new window.kakao.maps.LatLng(lat, lng),\n    level: 7,\n  };\n\n  useEffect(() => {\n    const map = new window.kakao.maps.Map(mapContainer.current, mapOptions);\n    if (showMarker) {\n      const markerPosition = new window.kakao.maps.LatLng(lat, lng);\n      const marker = new window.kakao.maps.Marker({\n        map: map,\n        position: markerPosition,\n      });\n    }\n\n    galleriesMarker.forEach((galleryMarker) => {\n      const setGalleryMarker = new window.kakao.maps.Marker({\n        map: map,\n        position: new window.kakao.maps.LatLng(\n          galleryMarker.latlng.lat,\n          galleryMarker.latlng.lng\n        ),\n        image: galleryMarkerImage,\n      });\n\n      window.kakao.maps.event.addListener(\n        setGalleryMarker,\n        \"click\",\n        function () {\n          setMapHeight(\n            ((window.innerWidth >= 560 ? 560 : window.innerWidth) * 1.1) / 3\n          );\n          const overlayContent = `<div class=\"close\" onClick={closeOverlay()} title=\"닫기\">닫기</div>`;\n          const overlay = new window.kakao.maps.CustomOverlay({\n            map: map,\n            content: overlayContent,\n            position: setGalleryMarker.getPosition(),\n          });\n          const closeOverlay = () => {\n            overlay.setMap(null);\n            setSelectedMarker(null);\n            setMapHeight(\n              (window.innerWidth >= 560 ? 560 : window.innerWidth) * 1.1\n            );\n          };\n          window.closeOverlay = closeOverlay;\n          console.log(setGalleryMarker.getPosition());\n          map.panTo(setGalleryMarker.getPosition());\n        }\n      );\n    });\n  }, [lat, lng, showMarker]);\n\n  return (\n    <div>\n      <div\n        id=\"map\"\n        ref={mapContainer}\n        style={{ width: \"100%\", height: `${mapHeight}px` }}\n      ></div>\n    </div>\n  );\n}\n\nexport default React.memo(KakaoMap);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}