{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { fetchShowTagsId, fetchTagName } from \"../../lib/api/Api\";\n\nfunction FetchShowTags(galleriesInfo) {\n  _s();\n\n  const [tagIdsList, setTagIdsList] = useState(null);\n  const [tagsList, setTagsList] = useState(null);\n  const [tagIdsError, setTagIdsError] = useState(null);\n  const [tagsError, setTagsError] = useState(null);\n  const [showIds, setShowIds] = useState(null); //   console.log(\"ga\", galleriesInfo);\n\n  useEffect(() => {\n    if (galleriesInfo !== null) {\n      setShowIds(galleriesInfo.map(galleryInfo => {\n        return galleryInfo.id;\n      }));\n    }\n  }, [galleriesInfo]); //   console.log(showIds);\n\n  useEffect(() => {\n    const getTagsIdsList = async () => {\n      try {\n        const tagsMap = {};\n        await Promise.all(showIds.map(async showId => {\n          const tags = await fetchShowTagsId(showId);\n          const tagIds = tags.map(tag => tag.tag_id);\n          tagsMap[showId] = tagIds;\n        }));\n        setTagIdsList(tagsMap);\n      } catch (e) {\n        setTagIdsError(e);\n      }\n    };\n\n    if (showIds !== null) {\n      getTagsIdsList();\n    }\n  }, [showIds]);\n  useEffect(() => {\n    const getTagsList = async () => {\n      try {\n        if (tagIdsList !== null) {\n          const tagNamesMap = {};\n\n          for (const showId in tagIdsList) {\n            const tagIds = tagIdsList[showId];\n            const tagNames = await Promise.all(tagIds.map(async tagId => {\n              const tagName = await fetchTagName(tagId);\n              return tagName;\n            }));\n            tagNamesMap[showId] = tagNames;\n          }\n\n          setTagsList(tagNamesMap);\n        }\n      } catch (e) {\n        setTagsError(e);\n      }\n    };\n\n    getTagsList();\n  }, [tagIdsList]);\n  console.log(tagsList);\n  return showIds;\n}\n\n_s(FetchShowTags, \"bDwV7rRWeFaCz5yVzHxVSW3wuYw=\");\n\n_c = FetchShowTags;\nexport default FetchShowTags;\n\nvar _c;\n\n$RefreshReg$(_c, \"FetchShowTags\");","map":{"version":3,"names":["useState","useEffect","fetchShowTagsId","fetchTagName","FetchShowTags","galleriesInfo","tagIdsList","setTagIdsList","tagsList","setTagsList","tagIdsError","setTagIdsError","tagsError","setTagsError","showIds","setShowIds","map","galleryInfo","id","getTagsIdsList","tagsMap","Promise","all","showId","tags","tagIds","tag","tag_id","e","getTagsList","tagNamesMap","tagNames","tagId","tagName","console","log"],"sources":["/Users/andrew/Desktop/exhi/exhi/exhi-lover/client/src/component/map/FetchShowTags.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { fetchShowTagsId, fetchTagName } from \"../../lib/api/Api\";\n\nfunction FetchShowTags(galleriesInfo) {\n  const [tagIdsList, setTagIdsList] = useState(null);\n  const [tagsList, setTagsList] = useState(null);\n  const [tagIdsError, setTagIdsError] = useState(null);\n  const [tagsError, setTagsError] = useState(null);\n  const [showIds, setShowIds] = useState(null);\n\n  //   console.log(\"ga\", galleriesInfo);\n  useEffect(() => {\n    if (galleriesInfo !== null) {\n      setShowIds(\n        galleriesInfo.map((galleryInfo) => {\n          return galleryInfo.id;\n        })\n      );\n    }\n  }, [galleriesInfo]);\n  //   console.log(showIds);\n\n  useEffect(() => {\n    const getTagsIdsList = async () => {\n      try {\n        const tagsMap = {};\n        await Promise.all(\n          showIds.map(async (showId) => {\n            const tags = await fetchShowTagsId(showId);\n            const tagIds = tags.map((tag) => tag.tag_id);\n            tagsMap[showId] = tagIds;\n          })\n        );\n        setTagIdsList(tagsMap);\n      } catch (e) {\n        setTagIdsError(e);\n      }\n    };\n    if (showIds !== null) {\n      getTagsIdsList();\n    }\n  }, [showIds]);\n\n  useEffect(() => {\n    const getTagsList = async () => {\n      try {\n        if (tagIdsList !== null) {\n          const tagNamesMap = {};\n          for (const showId in tagIdsList) {\n            const tagIds = tagIdsList[showId];\n            const tagNames = await Promise.all(\n              tagIds.map(async (tagId) => {\n                const tagName = await fetchTagName(tagId);\n                return tagName;\n              })\n            );\n            tagNamesMap[showId] = tagNames;\n          }\n          setTagsList(tagNamesMap);\n        }\n      } catch (e) {\n        setTagsError(e);\n      }\n    };\n    getTagsList();\n  }, [tagIdsList]);\n\n  console.log(tagsList);\n\n  return showIds;\n}\n\nexport default FetchShowTags;\n"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,eAAT,EAA0BC,YAA1B,QAA8C,mBAA9C;;AAEA,SAASC,aAAT,CAAuBC,aAAvB,EAAsC;EAAA;;EACpC,MAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BP,QAAQ,CAAC,IAAD,CAA5C;EACA,MAAM,CAACQ,QAAD,EAAWC,WAAX,IAA0BT,QAAQ,CAAC,IAAD,CAAxC;EACA,MAAM,CAACU,WAAD,EAAcC,cAAd,IAAgCX,QAAQ,CAAC,IAAD,CAA9C;EACA,MAAM,CAACY,SAAD,EAAYC,YAAZ,IAA4Bb,QAAQ,CAAC,IAAD,CAA1C;EACA,MAAM,CAACc,OAAD,EAAUC,UAAV,IAAwBf,QAAQ,CAAC,IAAD,CAAtC,CALoC,CAOpC;;EACAC,SAAS,CAAC,MAAM;IACd,IAAII,aAAa,KAAK,IAAtB,EAA4B;MAC1BU,UAAU,CACRV,aAAa,CAACW,GAAd,CAAmBC,WAAD,IAAiB;QACjC,OAAOA,WAAW,CAACC,EAAnB;MACD,CAFD,CADQ,CAAV;IAKD;EACF,CARQ,EAQN,CAACb,aAAD,CARM,CAAT,CARoC,CAiBpC;;EAEAJ,SAAS,CAAC,MAAM;IACd,MAAMkB,cAAc,GAAG,YAAY;MACjC,IAAI;QACF,MAAMC,OAAO,GAAG,EAAhB;QACA,MAAMC,OAAO,CAACC,GAAR,CACJR,OAAO,CAACE,GAAR,CAAY,MAAOO,MAAP,IAAkB;UAC5B,MAAMC,IAAI,GAAG,MAAMtB,eAAe,CAACqB,MAAD,CAAlC;UACA,MAAME,MAAM,GAAGD,IAAI,CAACR,GAAL,CAAUU,GAAD,IAASA,GAAG,CAACC,MAAtB,CAAf;UACAP,OAAO,CAACG,MAAD,CAAP,GAAkBE,MAAlB;QACD,CAJD,CADI,CAAN;QAOAlB,aAAa,CAACa,OAAD,CAAb;MACD,CAVD,CAUE,OAAOQ,CAAP,EAAU;QACVjB,cAAc,CAACiB,CAAD,CAAd;MACD;IACF,CAdD;;IAeA,IAAId,OAAO,KAAK,IAAhB,EAAsB;MACpBK,cAAc;IACf;EACF,CAnBQ,EAmBN,CAACL,OAAD,CAnBM,CAAT;EAqBAb,SAAS,CAAC,MAAM;IACd,MAAM4B,WAAW,GAAG,YAAY;MAC9B,IAAI;QACF,IAAIvB,UAAU,KAAK,IAAnB,EAAyB;UACvB,MAAMwB,WAAW,GAAG,EAApB;;UACA,KAAK,MAAMP,MAAX,IAAqBjB,UAArB,EAAiC;YAC/B,MAAMmB,MAAM,GAAGnB,UAAU,CAACiB,MAAD,CAAzB;YACA,MAAMQ,QAAQ,GAAG,MAAMV,OAAO,CAACC,GAAR,CACrBG,MAAM,CAACT,GAAP,CAAW,MAAOgB,KAAP,IAAiB;cAC1B,MAAMC,OAAO,GAAG,MAAM9B,YAAY,CAAC6B,KAAD,CAAlC;cACA,OAAOC,OAAP;YACD,CAHD,CADqB,CAAvB;YAMAH,WAAW,CAACP,MAAD,CAAX,GAAsBQ,QAAtB;UACD;;UACDtB,WAAW,CAACqB,WAAD,CAAX;QACD;MACF,CAfD,CAeE,OAAOF,CAAP,EAAU;QACVf,YAAY,CAACe,CAAD,CAAZ;MACD;IACF,CAnBD;;IAoBAC,WAAW;EACZ,CAtBQ,EAsBN,CAACvB,UAAD,CAtBM,CAAT;EAwBA4B,OAAO,CAACC,GAAR,CAAY3B,QAAZ;EAEA,OAAOM,OAAP;AACD;;GAnEQV,a;;KAAAA,a;AAqET,eAAeA,aAAf"},"metadata":{},"sourceType":"module"}