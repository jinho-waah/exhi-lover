{"ast":null,"code":"import _slicedToArray from\"/Users/andrew/Desktop/exhi/exhi/exhi-lover/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/*global kakao*/import React,{useEffect,useRef,useState,useMemo}from\"react\";import Marker from\"./Marker\";import\"./inform.css\";import icon from\"../../lib/icon/loc7.png\";import{jsx as _jsx}from\"react/jsx-runtime\";function KakaoMap(_ref){var lat=_ref.lat,lng=_ref.lng,showMarker=_ref.showMarker,galleriesMarker=_ref.galleriesMarker;// const [mapHeight, setMapHeight] = useState(\n//   (window.innerWidth >= 560 ? 560 : window.innerWidth) * 1.1\n// );\nvar mapHeight=(window.innerWidth>=560?560:window.innerWidth)*1.1;var mapContainer=useRef(null);var overlayRef=useRef(null);// const galleriesMarker = Marker();\nconsole.log(\"galleriesMarker\",galleriesMarker);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),selectedMarker=_useState2[0],setSelectedMarker=_useState2[1];var imageSize=new window.kakao.maps.Size(35,35);var galleryMarkerImage=new window.kakao.maps.MarkerImage(icon,imageSize);var mapOptions={center:new window.kakao.maps.LatLng(lat,lng),level:9};useEffect(function(){var map=new window.kakao.maps.Map(mapContainer.current,mapOptions);if(showMarker){var markerPosition=new window.kakao.maps.LatLng(lat,lng);var marker=new window.kakao.maps.Marker({map:map,position:markerPosition});}galleriesMarker.forEach(function(galleryMarker){var setGalleryMarker=new window.kakao.maps.Marker({map:map,position:new window.kakao.maps.LatLng(galleryMarker.latlng.lat,galleryMarker.latlng.lng),image:galleryMarkerImage});console.log(\"galleryMarker\",galleryMarker);window.kakao.maps.event.addListener(setGalleryMarker,\"click\",function(){console.log(1);if(!selectedMarker||selectedMarker!==setGalleryMarker){var overlayContent='<div class=\"wrap\">'+'    <div class=\"info\">'+'        <div class=\"title\">'+\"            \".concat(galleryMarker.title)+'            <div class=\"close\" onclick=\"closeOverlay()\" title=\"닫기\"></div>'+\"        </div>\"+'        <div class=\"body\">'+'            <div class=\"desc\">'+\"                <div class=\\\"ellipsis\\\">\".concat(galleryMarker.add,\"</div>\")+\"                <a href={tel:\".concat(galleryMarker.contact,\"} onClick={phoneCall()} class=\\\"jibun ellipsis\\\">\").concat(galleryMarker.contact,\"</a>\")+\"                <div><a href=\\\"\".concat(galleryMarker.url,\"\\\" target=\\\"_blank\\\" class=\\\"link\\\">\\uD648\\uD398\\uC774\\uC9C0</a></div>\")+\"            </div>\"+\"        </div>\"+\"    </div>\"+\"</div>\";if(!overlayRef.current){overlayRef.current=new window.kakao.maps.CustomOverlay({content:overlayContent,position:setGalleryMarker.getPosition()});overlayRef.current.setMap(map);}else{overlayRef.current.setPosition(setGalleryMarker.getPosition());overlayRef.current.setContent(overlayContent);}var closeOverlay=function closeOverlay(){overlayRef.current.setMap(null);setSelectedMarker(null);overlayRef.current=null;map.panTo(setGalleryMarker.getPosition());};var phoneCall=function phoneCall(){window.location.href=\"tel:\".concat(galleryMarker.contact);};window.closeOverlay=closeOverlay;window.phoneCall=phoneCall;map.panTo(setGalleryMarker.getPosition());}setSelectedMarker(setGalleryMarker);// if (!selectedMarker || selectedMarker !== setGalleryMarker) {\n//   const overlayContent = `<div class=\"close\" onClick={closeOverlay()} title=\"닫기\">overlay</div>`;\n//   const overlay = new window.kakao.maps.CustomOverlay({\n//     content: overlayContent,\n//     position: setGalleryMarker.getPosition(),\n//   });\n//   overlay.setMap(map);\n//   const closeOverlay = () => {\n//     overlay.setMap(null);\n//     setSelectedMarker(null);\n//     map.panTo(setGalleryMarker.getPosition());\n//   };\n//   window.closeOverlay = closeOverlay;\n//   map.panTo(setGalleryMarker.getPosition());\n// }\n// setSelectedMarker(setGalleryMarker);\n});});// function addLayout(galleryMarker) {}\n},[lat,lng,showMarker,galleriesMarker]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{id:\"map\",ref:mapContainer,style:{width:\"100%\",height:\"\".concat(mapHeight,\"px\")}})});}export default KakaoMap;","map":{"version":3,"names":["React","useEffect","useRef","useState","useMemo","Marker","icon","KakaoMap","lat","lng","showMarker","galleriesMarker","mapHeight","window","innerWidth","mapContainer","overlayRef","console","log","selectedMarker","setSelectedMarker","imageSize","kakao","maps","Size","galleryMarkerImage","MarkerImage","mapOptions","center","LatLng","level","map","Map","current","markerPosition","marker","position","forEach","galleryMarker","setGalleryMarker","latlng","image","event","addListener","overlayContent","title","add","contact","url","CustomOverlay","content","getPosition","setMap","setPosition","setContent","closeOverlay","panTo","phoneCall","location","href","width","height"],"sources":["/Users/andrew/Desktop/exhi/exhi/exhi-lover/client/src/component/map/KakaoMap.js"],"sourcesContent":["/*global kakao*/\nimport React, { useEffect, useRef, useState, useMemo } from \"react\";\nimport Marker from \"./Marker\";\nimport \"./inform.css\";\nimport icon from \"../../lib/icon/loc7.png\";\n\nfunction KakaoMap({ lat, lng, showMarker, galleriesMarker }) {\n  // const [mapHeight, setMapHeight] = useState(\n  //   (window.innerWidth >= 560 ? 560 : window.innerWidth) * 1.1\n  // );\n  const mapHeight = (window.innerWidth >= 560 ? 560 : window.innerWidth) * 1.1;\n  const mapContainer = useRef(null);\n  const overlayRef = useRef(null);\n  // const galleriesMarker = Marker();\n  console.log(\"galleriesMarker\", galleriesMarker);\n  const [selectedMarker, setSelectedMarker] = useState(null);\n\n  const imageSize = new window.kakao.maps.Size(35, 35);\n  const galleryMarkerImage = new window.kakao.maps.MarkerImage(icon, imageSize);\n\n  const mapOptions = {\n    center: new window.kakao.maps.LatLng(lat, lng),\n    level: 9,\n  };\n\n  useEffect(() => {\n    const map = new window.kakao.maps.Map(mapContainer.current, mapOptions);\n    if (showMarker) {\n      const markerPosition = new window.kakao.maps.LatLng(lat, lng);\n      const marker = new window.kakao.maps.Marker({\n        map: map,\n        position: markerPosition,\n      });\n    }\n\n    galleriesMarker.forEach((galleryMarker) => {\n      const setGalleryMarker = new window.kakao.maps.Marker({\n        map: map,\n        position: new window.kakao.maps.LatLng(\n          galleryMarker.latlng.lat,\n          galleryMarker.latlng.lng\n        ),\n        image: galleryMarkerImage,\n      });\n      console.log(\"galleryMarker\", galleryMarker);\n\n      window.kakao.maps.event.addListener(\n        setGalleryMarker,\n        \"click\",\n        function () {\n          console.log(1);\n          if (!selectedMarker || selectedMarker !== setGalleryMarker) {\n            const overlayContent =\n              '<div class=\"wrap\">' +\n              '    <div class=\"info\">' +\n              '        <div class=\"title\">' +\n              `            ${galleryMarker.title}` +\n              '            <div class=\"close\" onclick=\"closeOverlay()\" title=\"닫기\"></div>' +\n              \"        </div>\" +\n              '        <div class=\"body\">' +\n              '            <div class=\"desc\">' +\n              `                <div class=\"ellipsis\">${galleryMarker.add}</div>` +\n              `                <a href={tel:${galleryMarker.contact}} onClick={phoneCall()} class=\"jibun ellipsis\">${galleryMarker.contact}</a>` +\n              `                <div><a href=\"${galleryMarker.url}\" target=\"_blank\" class=\"link\">홈페이지</a></div>` +\n              \"            </div>\" +\n              \"        </div>\" +\n              \"    </div>\" +\n              \"</div>\";\n\n            if (!overlayRef.current) {\n              overlayRef.current = new window.kakao.maps.CustomOverlay({\n                content: overlayContent,\n                position: setGalleryMarker.getPosition(),\n              });\n              overlayRef.current.setMap(map);\n            } else {\n              overlayRef.current.setPosition(setGalleryMarker.getPosition());\n              overlayRef.current.setContent(overlayContent);\n            }\n            const closeOverlay = () => {\n              overlayRef.current.setMap(null);\n              setSelectedMarker(null);\n              overlayRef.current = null;\n              map.panTo(setGalleryMarker.getPosition());\n            };\n            const phoneCall = () => {\n              window.location.href = `tel:${galleryMarker.contact}`;\n            };\n            window.closeOverlay = closeOverlay;\n            window.phoneCall = phoneCall;\n            map.panTo(setGalleryMarker.getPosition());\n          }\n          setSelectedMarker(setGalleryMarker);\n          // if (!selectedMarker || selectedMarker !== setGalleryMarker) {\n          //   const overlayContent = `<div class=\"close\" onClick={closeOverlay()} title=\"닫기\">overlay</div>`;\n          //   const overlay = new window.kakao.maps.CustomOverlay({\n          //     content: overlayContent,\n          //     position: setGalleryMarker.getPosition(),\n          //   });\n          //   overlay.setMap(map);\n          //   const closeOverlay = () => {\n          //     overlay.setMap(null);\n          //     setSelectedMarker(null);\n          //     map.panTo(setGalleryMarker.getPosition());\n          //   };\n          //   window.closeOverlay = closeOverlay;\n          //   map.panTo(setGalleryMarker.getPosition());\n          // }\n          // setSelectedMarker(setGalleryMarker);\n        }\n      );\n    });\n\n    // function addLayout(galleryMarker) {}\n  }, [lat, lng, showMarker, galleriesMarker]);\n\n  return (\n    <div>\n      <div\n        id=\"map\"\n        ref={mapContainer}\n        style={{ width: \"100%\", height: `${mapHeight}px` }}\n      ></div>\n    </div>\n  );\n}\n\nexport default KakaoMap;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}