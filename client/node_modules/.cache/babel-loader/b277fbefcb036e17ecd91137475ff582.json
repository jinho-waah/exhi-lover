{"ast":null,"code":"import _objectSpread from\"/Users/andrew/Desktop/exhi/exhi/exhi-lover/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/andrew/Desktop/exhi/exhi/exhi-lover/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/Users/andrew/Desktop/exhi/exhi/exhi-lover/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import React from\"react\";import styled from\"styled-components\";import{useMemo}from\"react\";import{useEffect,useState}from\"react\";import KakaoMap from\"./KaKaoMap\";import Marker from\"./Marker\";import{jsx as _jsx}from\"react/jsx-runtime\";var MapBox=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  align-items: center;\\n  margin: 0;\\n\\n  @media (max-width: 560px) {\\n    height: calc(110vw + 50px);\\n  }\\n\\n  @media (min-width: 561px) {\\n    // height: 616px;\\n    height: 666px;\\n  }\\n\"])));var MapTemplate=function MapTemplate(){var _useState=useState({center:{lat:37.56649,lng:126.978488},errMsg:null,isLoading:true}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _Marker=Marker(),positions=_Marker.positions,markersLoading=_Marker.isLoading;// Marker에서 로딩 상태와 positions을 받음\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),flag=_useState4[0],setFlag=_useState4[1];// true -> marker 활성화 (위치 활성화를 하지 않으면 no marker)\nuseEffect(function(){if(navigator.geolocation){// GeoLocation을 이용해서 접속 위치를 얻어옵니다\nnavigator.geolocation.getCurrentPosition(function(position){setState(function(prev){return _objectSpread(_objectSpread({},prev),{},{center:{lat:position.coords.latitude,// 위도\nlng:position.coords.longitude// 경도\n},isLoading:false});});},function(err){setState(function(prev){return _objectSpread(_objectSpread({},prev),{},{errMsg:err.message,isLoading:false});});});}else{// HTML5의 GeoLocation을 사용할 수 없을때 마커 표시 위치와 인포윈도우 내용을 설정합니다\nsetState(function(prev){return _objectSpread(_objectSpread({},prev),{},{errMsg:\"geolocation을 사용할수 없어요..\",isLoading:false});});}},[]);useEffect(function(){if(!state.isLoading&&!markersLoading){setFlag(true);// 모든 로딩이 완료되었을 때 flag를 true로 설정\n}},[state.isLoading,markersLoading]);return/*#__PURE__*/_jsx(MapBox,{children:flag&&/*#__PURE__*/_jsx(KakaoMap,{lat:state.center.lat,lng:state.center.lng,flag:flag// showMarker에 flag 값 전달\n,galleriesMarker:positions// 갤러리 마커 데이터 전달\n})});};export default MapTemplate;","map":{"version":3,"names":["React","styled","useMemo","useEffect","useState","KakaoMap","Marker","MapBox","div","MapTemplate","center","lat","lng","errMsg","isLoading","state","setState","positions","markersLoading","flag","setFlag","navigator","geolocation","getCurrentPosition","position","prev","coords","latitude","longitude","err","message"],"sources":["/Users/andrew/Desktop/exhi/exhi/exhi-lover/client/src/component/map/MapTemplate.js"],"sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\nimport { useMemo } from \"react\";\nimport { useEffect, useState } from \"react\";\nimport KakaoMap from \"./KaKaoMap\";\nimport Marker from \"./Marker\";\n\nconst MapBox = styled.div`\n  width: 100%;\n  align-items: center;\n  margin: 0;\n\n  @media (max-width: 560px) {\n    height: calc(110vw + 50px);\n  }\n\n  @media (min-width: 561px) {\n    // height: 616px;\n    height: 666px;\n  }\n`;\n\nconst MapTemplate = () => {\n  const [state, setState] = useState({\n    center: {\n      lat: 37.56649,\n      lng: 126.978488,\n    },\n    errMsg: null,\n    isLoading: true,\n  });\n\n  const { positions, isLoading: markersLoading } = Marker(); // Marker에서 로딩 상태와 positions을 받음\n\n  const [flag, setFlag] = useState(false); // true -> marker 활성화 (위치 활성화를 하지 않으면 no marker)\n\n  useEffect(() => {\n    if (navigator.geolocation) {\n      // GeoLocation을 이용해서 접속 위치를 얻어옵니다\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          setState((prev) => ({\n            ...prev,\n            center: {\n              lat: position.coords.latitude, // 위도\n              lng: position.coords.longitude, // 경도\n            },\n            isLoading: false,\n          }));\n        },\n        (err) => {\n          setState((prev) => ({\n            ...prev,\n            errMsg: err.message,\n            isLoading: false,\n          }));\n        }\n      );\n    } else {\n      // HTML5의 GeoLocation을 사용할 수 없을때 마커 표시 위치와 인포윈도우 내용을 설정합니다\n      setState((prev) => ({\n        ...prev,\n        errMsg: \"geolocation을 사용할수 없어요..\",\n        isLoading: false,\n      }));\n    }\n  }, []);\n\n  useEffect(() => {\n    if (!state.isLoading && !markersLoading) {\n      setFlag(true); // 모든 로딩이 완료되었을 때 flag를 true로 설정\n    }\n  }, [state.isLoading, markersLoading]);\n\n  return (\n    <MapBox>\n      {flag && (\n        <KakaoMap\n          lat={state.center.lat}\n          lng={state.center.lng}\n          flag={flag} // showMarker에 flag 값 전달\n          galleriesMarker={positions} // 갤러리 마커 데이터 전달\n        />\n      )}\n    </MapBox>\n  );\n};\n\nexport default MapTemplate;\n"],"mappings":"wbAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAOC,OAAP,KAAmB,mBAAnB,CACA,OAASC,OAAT,KAAwB,OAAxB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAOC,SAAP,KAAqB,YAArB,CACA,MAAOC,OAAP,KAAmB,UAAnB,C,2CAEA,GAAMC,OAAM,CAAGN,MAAM,CAACO,GAAV,iRAAZ,CAeA,GAAMC,YAAW,CAAG,QAAdA,YAAc,EAAM,CACxB,cAA0BL,QAAQ,CAAC,CACjCM,MAAM,CAAE,CACNC,GAAG,CAAE,QADC,CAENC,GAAG,CAAE,UAFC,CADyB,CAKjCC,MAAM,CAAE,IALyB,CAMjCC,SAAS,CAAE,IANsB,CAAD,CAAlC,wCAAOC,KAAP,eAAcC,QAAd,eASA,YAAiDV,MAAM,EAAvD,CAAQW,SAAR,SAAQA,SAAR,CAA8BC,cAA9B,SAAmBJ,SAAnB,CAA2D;AAE3D,eAAwBV,QAAQ,CAAC,KAAD,CAAhC,yCAAOe,IAAP,eAAaC,OAAb,eAAyC;AAEzCjB,SAAS,CAAC,UAAM,CACd,GAAIkB,SAAS,CAACC,WAAd,CAA2B,CACzB;AACAD,SAAS,CAACC,WAAV,CAAsBC,kBAAtB,CACE,SAACC,QAAD,CAAc,CACZR,QAAQ,CAAC,SAACS,IAAD,wCACJA,IADI,MAEPf,MAAM,CAAE,CACNC,GAAG,CAAEa,QAAQ,CAACE,MAAT,CAAgBC,QADf,CACyB;AAC/Bf,GAAG,CAAEY,QAAQ,CAACE,MAAT,CAAgBE,SAAW;AAF1B,CAFD,CAMPd,SAAS,CAAE,KANJ,IAAD,CAAR,CAQD,CAVH,CAWE,SAACe,GAAD,CAAS,CACPb,QAAQ,CAAC,SAACS,IAAD,wCACJA,IADI,MAEPZ,MAAM,CAAEgB,GAAG,CAACC,OAFL,CAGPhB,SAAS,CAAE,KAHJ,IAAD,CAAR,CAKD,CAjBH,EAmBD,CArBD,IAqBO,CACL;AACAE,QAAQ,CAAC,SAACS,IAAD,wCACJA,IADI,MAEPZ,MAAM,CAAE,yBAFD,CAGPC,SAAS,CAAE,KAHJ,IAAD,CAAR,CAKD,CACF,CA9BQ,CA8BN,EA9BM,CAAT,CAgCAX,SAAS,CAAC,UAAM,CACd,GAAI,CAACY,KAAK,CAACD,SAAP,EAAoB,CAACI,cAAzB,CAAyC,CACvCE,OAAO,CAAC,IAAD,CAAP,CAAe;AAChB,CACF,CAJQ,CAIN,CAACL,KAAK,CAACD,SAAP,CAAkBI,cAAlB,CAJM,CAAT,CAMA,mBACE,KAAC,MAAD,WACGC,IAAI,eACH,KAAC,QAAD,EACE,GAAG,CAAEJ,KAAK,CAACL,MAAN,CAAaC,GADpB,CAEE,GAAG,CAAEI,KAAK,CAACL,MAAN,CAAaE,GAFpB,CAGE,IAAI,CAAEO,IAAM;AAHd,CAIE,eAAe,CAAEF,SAAW;AAJ9B,EAFJ,EADF,CAYD,CAhED,CAkEA,cAAeR,YAAf"},"metadata":{},"sourceType":"module"}