{"ast":null,"code":"import _slicedToArray from\"/Users/andrew/Desktop/exhi/exhi/exhi-lover/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/*global kakao*/import React,{useEffect,useRef,useState}from\"react\";import Marker from\"./Marker\";import\"./inform.css\";import icon from\"../../lib/icon/loc7.png\";import{jsx as _jsx}from\"react/jsx-runtime\";function KakaoMap(_ref){var lat=_ref.lat,lng=_ref.lng,showMarker=_ref.showMarker;// const [mapHeight, setMapHeight] = useState(\n//   (window.innerWidth >= 560 ? 560 : window.innerWidth) * 1.1\n// );\nvar mapHeight=(window.innerWidth>=560?560:window.innerWidth)*1.1;var mapContainer=useRef(null);var overlayRef=useRef(null);var galleriesMarker=Marker();console.log(\"galleriesMarker\",galleriesMarker);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),selectedMarker=_useState2[0],setSelectedMarker=_useState2[1];var imageSize=new window.kakao.maps.Size(35,35);var galleryMarkerImage=new window.kakao.maps.MarkerImage(icon,imageSize);var mapOptions={center:new window.kakao.maps.LatLng(lat,lng),level:9};useEffect(function(){var map=new window.kakao.maps.Map(mapContainer.current,mapOptions);if(showMarker){var markerPosition=new window.kakao.maps.LatLng(lat,lng);var marker=new window.kakao.maps.Marker({map:map,position:markerPosition});}galleriesMarker.forEach(function(galleryMarker){addLayout(galleryMarker);});function addLayout(galleryMarker){var setGalleryMarker=new window.kakao.maps.Marker({map:map,position:new window.kakao.maps.LatLng(galleryMarker.latlng.lat,galleryMarker.latlng.lng),image:galleryMarkerImage});console.log(\"galleryMarker\",galleryMarker);function phoneCall(){window.location.href=\"tel:\".concat(galleryMarker.contact);}window.kakao.maps.event.addListener(setGalleryMarker,\"click\",function(){if(!selectedMarker||selectedMarker!==setGalleryMarker){var overlayContent='<div class=\"wrap\">'+'    <div class=\"info\">'+'        <div class=\"title\">'+\"            \".concat(galleryMarker.title)+\"             <br /> \"+'            <div class=\"close\" onclick=\"closeOverlay()\" title=\"닫기\"></div>'+\"        </div>\"+'        <div class=\"body\">'+'            <div class=\"desc\">'+\"                <div class=\\\"ellipsis\\\">\".concat(galleryMarker.add,\"</div>\")+\"                <a href={tel:\".concat(galleryMarker.contact,\"} onClick={phoneCall()} class=\\\"jibun ellipsis\\\">\").concat(galleryMarker.contact,\"</a>\")+\"                <div><a href=\\\"\".concat(galleryMarker.url,\"\\\" target=\\\"_blank\\\" class=\\\"link\\\">\\uD648\\uD398\\uC774\\uC9C0</a></div>\")+\"            </div>\"+\"        </div>\"+\"    </div>\"+\"</div>\";if(!overlayRef.current){overlayRef.current=new window.kakao.maps.CustomOverlay({content:overlayContent,position:setGalleryMarker.getPosition()});overlayRef.current.setMap(map);}else{overlayRef.current.setPosition(setGalleryMarker.getPosition());overlayRef.current.setContent(overlayContent);}var closeOverlay=function closeOverlay(){overlayRef.current.setMap(null);setSelectedMarker(null);overlayRef.current=null;map.panTo(setGalleryMarker.getPosition());};window.closeOverlay=closeOverlay;map.panTo(setGalleryMarker.getPosition());}setSelectedMarker(setGalleryMarker);// if (!selectedMarker || selectedMarker !== setGalleryMarker) {\n//   const overlayContent = `<div class=\"close\" onClick={closeOverlay()} title=\"닫기\">overlay</div>`;\n//   const overlay = new window.kakao.maps.CustomOverlay({\n//     content: overlayContent,\n//     position: setGalleryMarker.getPosition(),\n//   });\n//   overlay.setMap(map);\n//   const closeOverlay = () => {\n//     overlay.setMap(null);\n//     setSelectedMarker(null);\n//     map.panTo(setGalleryMarker.getPosition());\n//   };\n//   window.closeOverlay = closeOverlay;\n//   map.panTo(setGalleryMarker.getPosition());\n// }\n// setSelectedMarker(setGalleryMarker);\n});}},[lat,lng,showMarker]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{id:\"map\",ref:mapContainer,style:{width:\"100%\",height:\"\".concat(mapHeight,\"px\")}})});}export default/*#__PURE__*/React.memo(KakaoMap);","map":{"version":3,"names":["React","useEffect","useRef","useState","Marker","icon","KakaoMap","lat","lng","showMarker","mapHeight","window","innerWidth","mapContainer","overlayRef","galleriesMarker","console","log","selectedMarker","setSelectedMarker","imageSize","kakao","maps","Size","galleryMarkerImage","MarkerImage","mapOptions","center","LatLng","level","map","Map","current","markerPosition","marker","position","forEach","galleryMarker","addLayout","setGalleryMarker","latlng","image","phoneCall","location","href","contact","event","addListener","overlayContent","title","add","url","CustomOverlay","content","getPosition","setMap","setPosition","setContent","closeOverlay","panTo","width","height","memo"],"sources":["/Users/andrew/Desktop/exhi/exhi/exhi-lover/client/src/component/map/KakaoMap.js"],"sourcesContent":["/*global kakao*/\nimport React, { useEffect, useRef, useState } from \"react\";\nimport Marker from \"./Marker\";\nimport \"./inform.css\";\nimport icon from \"../../lib/icon/loc7.png\";\n\nfunction KakaoMap({ lat, lng, showMarker }) {\n  // const [mapHeight, setMapHeight] = useState(\n  //   (window.innerWidth >= 560 ? 560 : window.innerWidth) * 1.1\n  // );\n  const mapHeight = (window.innerWidth >= 560 ? 560 : window.innerWidth) * 1.1;\n  const mapContainer = useRef(null);\n  const overlayRef = useRef(null);\n  const galleriesMarker = Marker();\n  console.log(\"galleriesMarker\", galleriesMarker);\n  const [selectedMarker, setSelectedMarker] = useState(null);\n\n  const imageSize = new window.kakao.maps.Size(35, 35);\n  const galleryMarkerImage = new window.kakao.maps.MarkerImage(icon, imageSize);\n\n  const mapOptions = {\n    center: new window.kakao.maps.LatLng(lat, lng),\n    level: 9,\n  };\n\n  useEffect(() => {\n    const map = new window.kakao.maps.Map(mapContainer.current, mapOptions);\n    if (showMarker) {\n      const markerPosition = new window.kakao.maps.LatLng(lat, lng);\n      const marker = new window.kakao.maps.Marker({\n        map: map,\n        position: markerPosition,\n      });\n    }\n\n    galleriesMarker.forEach((galleryMarker) => {\n      addLayout(galleryMarker);\n    });\n\n    function addLayout(galleryMarker) {\n      const setGalleryMarker = new window.kakao.maps.Marker({\n        map: map,\n        position: new window.kakao.maps.LatLng(\n          galleryMarker.latlng.lat,\n          galleryMarker.latlng.lng\n        ),\n        image: galleryMarkerImage,\n      });\n      console.log(\"galleryMarker\", galleryMarker);\n      function phoneCall() {\n        window.location.href = `tel:${galleryMarker.contact}`;\n      }\n      window.kakao.maps.event.addListener(\n        setGalleryMarker,\n        \"click\",\n        function () {\n          if (!selectedMarker || selectedMarker !== setGalleryMarker) {\n            const overlayContent =\n              '<div class=\"wrap\">' +\n              '    <div class=\"info\">' +\n              '        <div class=\"title\">' +\n              `            ${galleryMarker.title}` +\n              \"             <br /> \" +\n              '            <div class=\"close\" onclick=\"closeOverlay()\" title=\"닫기\"></div>' +\n              \"        </div>\" +\n              '        <div class=\"body\">' +\n              '            <div class=\"desc\">' +\n              `                <div class=\"ellipsis\">${galleryMarker.add}</div>` +\n              `                <a href={tel:${galleryMarker.contact}} onClick={phoneCall()} class=\"jibun ellipsis\">${galleryMarker.contact}</a>` +\n              `                <div><a href=\"${galleryMarker.url}\" target=\"_blank\" class=\"link\">홈페이지</a></div>` +\n              \"            </div>\" +\n              \"        </div>\" +\n              \"    </div>\" +\n              \"</div>\";\n\n            if (!overlayRef.current) {\n              overlayRef.current = new window.kakao.maps.CustomOverlay({\n                content: overlayContent,\n                position: setGalleryMarker.getPosition(),\n              });\n              overlayRef.current.setMap(map);\n            } else {\n              overlayRef.current.setPosition(setGalleryMarker.getPosition());\n              overlayRef.current.setContent(overlayContent);\n            }\n\n            const closeOverlay = () => {\n              overlayRef.current.setMap(null);\n              setSelectedMarker(null);\n              overlayRef.current = null;\n              map.panTo(setGalleryMarker.getPosition());\n            };\n            window.closeOverlay = closeOverlay;\n            map.panTo(setGalleryMarker.getPosition());\n          }\n          setSelectedMarker(setGalleryMarker);\n          // if (!selectedMarker || selectedMarker !== setGalleryMarker) {\n          //   const overlayContent = `<div class=\"close\" onClick={closeOverlay()} title=\"닫기\">overlay</div>`;\n          //   const overlay = new window.kakao.maps.CustomOverlay({\n          //     content: overlayContent,\n          //     position: setGalleryMarker.getPosition(),\n          //   });\n          //   overlay.setMap(map);\n          //   const closeOverlay = () => {\n          //     overlay.setMap(null);\n          //     setSelectedMarker(null);\n          //     map.panTo(setGalleryMarker.getPosition());\n          //   };\n          //   window.closeOverlay = closeOverlay;\n          //   map.panTo(setGalleryMarker.getPosition());\n          // }\n          // setSelectedMarker(setGalleryMarker);\n        }\n      );\n    }\n  }, [lat, lng, showMarker]);\n\n  return (\n    <div>\n      <div\n        id=\"map\"\n        ref={mapContainer}\n        style={{ width: \"100%\", height: `${mapHeight}px` }}\n      ></div>\n    </div>\n  );\n}\n\nexport default React.memo(KakaoMap);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}