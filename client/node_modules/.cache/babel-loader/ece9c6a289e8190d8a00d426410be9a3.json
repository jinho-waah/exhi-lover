{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { fetchShowTagsId, fetchTagName } from \"../../lib/api/Api\";\n\nfunction FetchShowTags(galleriesInfo) {\n  _s();\n\n  const [tagIdsList, setTagIdsList] = useState([]);\n  const [tagsList, setTagsList] = useState([]);\n  const [tagIdsError, setTagIdsError] = useState(null);\n  const [tagsError, setTagsError] = useState(null);\n  const [showIds, setShowIds] = useState(null); //   console.log(\"ga\", galleriesInfo);\n\n  useEffect(() => {\n    if (galleriesInfo !== null) {\n      setShowIds(galleriesInfo.map(galleryInfo => {\n        return galleryInfo.id;\n      }));\n    }\n  }, [galleriesInfo]); //   console.log(showIds);\n\n  useEffect(() => {\n    const getTagsIdsList = async () => {\n      try {\n        const tagsMap = {};\n        await Promise.all(showIds.map(async showId => {\n          const tags = await fetchShowTagsId(showId);\n          const tagIds = tags.map(tag => tag.tag_id);\n          tagsMap[showId] = tagIds;\n        }));\n        setTagIdsList(tagsMap);\n      } catch (e) {\n        setTagIdsError(e);\n      }\n    };\n\n    if (showIds !== null) {\n      getTagsIdsList();\n    }\n  }, [showIds]);\n  console.log(tagIdsList); //   useEffect(() => {\n  //     const fetchTagsIds = async () => {\n  //       try {\n  //         setError(null);\n  //         const ids = await fetchShowTagsId(showIds);\n  //         const sortedIds = [\n  //           ...ids\n  //             .filter((item) => item.tag_id === 52)\n  //             .map((item) => item.tag_id),\n  //           ...ids\n  //             .filter((item) => item.tag_id !== 52)\n  //             .map((item) => item.tag_id),\n  //         ];\n  //         setTagIds(sortedIds);\n  //       } catch (e) {\n  //         setError(e);\n  //       }\n  //     };\n  //     fetchTagsIds();\n  //   }, [showIds]);\n  //   useEffect(() => {\n  //     const fetchTags = async () => {\n  //       try {\n  //         setError(null);\n  //         const fetchedTags = await Promise.all(\n  //           tagIds.map(async (tagId) => {\n  //             return fetchTagName(tagId);\n  //           })\n  //         );\n  //         setTags(fetchedTags);\n  //       } catch (e) {\n  //         setError(e);\n  //       }\n  //     };\n  //     if (tagIds && tagIds.length > 0) {\n  //       fetchTags()\n  //         .then(() => setLoading(false))\n  //         .catch((error) => setError(error));\n  //     }\n  //   }, [tagIds]);\n\n  return showIds;\n}\n\n_s(FetchShowTags, \"QF1iAwwC3EKA6ENR+zKn3RGevkI=\");\n\n_c = FetchShowTags;\nexport default FetchShowTags;\n\nvar _c;\n\n$RefreshReg$(_c, \"FetchShowTags\");","map":{"version":3,"names":["useState","useEffect","fetchShowTagsId","fetchTagName","FetchShowTags","galleriesInfo","tagIdsList","setTagIdsList","tagsList","setTagsList","tagIdsError","setTagIdsError","tagsError","setTagsError","showIds","setShowIds","map","galleryInfo","id","getTagsIdsList","tagsMap","Promise","all","showId","tags","tagIds","tag","tag_id","e","console","log"],"sources":["/Users/andrew/Desktop/exhi/exhi/exhi-lover/client/src/component/map/FetchShowTags.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { fetchShowTagsId, fetchTagName } from \"../../lib/api/Api\";\n\nfunction FetchShowTags(galleriesInfo) {\n  const [tagIdsList, setTagIdsList] = useState([]);\n  const [tagsList, setTagsList] = useState([]);\n  const [tagIdsError, setTagIdsError] = useState(null);\n  const [tagsError, setTagsError] = useState(null);\n  const [showIds, setShowIds] = useState(null);\n\n  //   console.log(\"ga\", galleriesInfo);\n  useEffect(() => {\n    if (galleriesInfo !== null) {\n      setShowIds(\n        galleriesInfo.map((galleryInfo) => {\n          return galleryInfo.id;\n        })\n      );\n    }\n  }, [galleriesInfo]);\n  //   console.log(showIds);\n\n  useEffect(() => {\n    const getTagsIdsList = async () => {\n      try {\n        const tagsMap = {};\n        await Promise.all(\n          showIds.map(async (showId) => {\n            const tags = await fetchShowTagsId(showId);\n            const tagIds = tags.map((tag) => tag.tag_id);\n            tagsMap[showId] = tagIds;\n          })\n        );\n        setTagIdsList(tagsMap);\n      } catch (e) {\n        setTagIdsError(e);\n      }\n    };\n    if (showIds !== null) {\n      getTagsIdsList();\n    }\n  }, [showIds]);\n  console.log(tagIdsList);\n\n  //   useEffect(() => {\n  //     const fetchTagsIds = async () => {\n  //       try {\n  //         setError(null);\n\n  //         const ids = await fetchShowTagsId(showIds);\n  //         const sortedIds = [\n  //           ...ids\n  //             .filter((item) => item.tag_id === 52)\n  //             .map((item) => item.tag_id),\n  //           ...ids\n  //             .filter((item) => item.tag_id !== 52)\n  //             .map((item) => item.tag_id),\n  //         ];\n  //         setTagIds(sortedIds);\n  //       } catch (e) {\n  //         setError(e);\n  //       }\n  //     };\n  //     fetchTagsIds();\n  //   }, [showIds]);\n\n  //   useEffect(() => {\n  //     const fetchTags = async () => {\n  //       try {\n  //         setError(null);\n  //         const fetchedTags = await Promise.all(\n  //           tagIds.map(async (tagId) => {\n  //             return fetchTagName(tagId);\n  //           })\n  //         );\n  //         setTags(fetchedTags);\n  //       } catch (e) {\n  //         setError(e);\n  //       }\n  //     };\n\n  //     if (tagIds && tagIds.length > 0) {\n  //       fetchTags()\n  //         .then(() => setLoading(false))\n  //         .catch((error) => setError(error));\n  //     }\n  //   }, [tagIds]);\n\n  return showIds;\n}\n\nexport default FetchShowTags;\n"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,eAAT,EAA0BC,YAA1B,QAA8C,mBAA9C;;AAEA,SAASC,aAAT,CAAuBC,aAAvB,EAAsC;EAAA;;EACpC,MAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BP,QAAQ,CAAC,EAAD,CAA5C;EACA,MAAM,CAACQ,QAAD,EAAWC,WAAX,IAA0BT,QAAQ,CAAC,EAAD,CAAxC;EACA,MAAM,CAACU,WAAD,EAAcC,cAAd,IAAgCX,QAAQ,CAAC,IAAD,CAA9C;EACA,MAAM,CAACY,SAAD,EAAYC,YAAZ,IAA4Bb,QAAQ,CAAC,IAAD,CAA1C;EACA,MAAM,CAACc,OAAD,EAAUC,UAAV,IAAwBf,QAAQ,CAAC,IAAD,CAAtC,CALoC,CAOpC;;EACAC,SAAS,CAAC,MAAM;IACd,IAAII,aAAa,KAAK,IAAtB,EAA4B;MAC1BU,UAAU,CACRV,aAAa,CAACW,GAAd,CAAmBC,WAAD,IAAiB;QACjC,OAAOA,WAAW,CAACC,EAAnB;MACD,CAFD,CADQ,CAAV;IAKD;EACF,CARQ,EAQN,CAACb,aAAD,CARM,CAAT,CARoC,CAiBpC;;EAEAJ,SAAS,CAAC,MAAM;IACd,MAAMkB,cAAc,GAAG,YAAY;MACjC,IAAI;QACF,MAAMC,OAAO,GAAG,EAAhB;QACA,MAAMC,OAAO,CAACC,GAAR,CACJR,OAAO,CAACE,GAAR,CAAY,MAAOO,MAAP,IAAkB;UAC5B,MAAMC,IAAI,GAAG,MAAMtB,eAAe,CAACqB,MAAD,CAAlC;UACA,MAAME,MAAM,GAAGD,IAAI,CAACR,GAAL,CAAUU,GAAD,IAASA,GAAG,CAACC,MAAtB,CAAf;UACAP,OAAO,CAACG,MAAD,CAAP,GAAkBE,MAAlB;QACD,CAJD,CADI,CAAN;QAOAlB,aAAa,CAACa,OAAD,CAAb;MACD,CAVD,CAUE,OAAOQ,CAAP,EAAU;QACVjB,cAAc,CAACiB,CAAD,CAAd;MACD;IACF,CAdD;;IAeA,IAAId,OAAO,KAAK,IAAhB,EAAsB;MACpBK,cAAc;IACf;EACF,CAnBQ,EAmBN,CAACL,OAAD,CAnBM,CAAT;EAoBAe,OAAO,CAACC,GAAR,CAAYxB,UAAZ,EAvCoC,CAyCpC;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA,OAAOQ,OAAP;AACD;;GAtFQV,a;;KAAAA,a;AAwFT,eAAeA,aAAf"},"metadata":{},"sourceType":"module"}