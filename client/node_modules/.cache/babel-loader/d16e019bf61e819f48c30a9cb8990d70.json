{"ast":null,"code":"var _jsxFileName = \"/Users/andrew/Desktop/exhi/exhi/exhi-lover/client/src/component/map/MapTemplate.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport KakaoMap from \"./KaKaoMap\";\nimport Marker from \"./Marker\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { fetchGalleryLocation } from \"../../lib/api/Api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MapBox = styled.div`\n  width: 100%;\n  align-items: center;\n  margin: 0;\n\n  @media (max-width: 560px) {\n    height: calc(110vw + 50px);\n  }\n\n  @media (min-width: 561px) {\n    height: 666px;\n  }\n`;\n_c = MapBox;\n\nconst fetchUserLocation = () => {\n  return new Promise((resolve, reject) => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(position => {\n        resolve({\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        });\n      }, err => {\n        reject(new Error(\"geolocation을 사용할 수 없어요.\"));\n      });\n    } else {\n      reject(new Error(\"geolocation을 지원하지 않습니다.\"));\n    }\n  });\n};\n\nconst MapTemplate = () => {\n  _s();\n\n  const {\n    data: userLocation,\n    isError: locationError,\n    isLoading: locationLoading\n  } = useQuery({\n    queryKey: [\"userLocation\"],\n    queryFn: fetchUserLocation\n  });\n  const {\n    positions,\n    isLoading: markersLoading\n  } = Marker(); // Marker에서 positions과 로딩 상태 받아옴\n\n  const isReady = !locationLoading && !markersLoading && userLocation;\n\n  if (locationError) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: locationError.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(MapBox, {\n    children: isReady && /*#__PURE__*/_jsxDEV(KakaoMap, {\n      lat: userLocation.lat,\n      lng: userLocation.lng,\n      galleriesMarker: positions // 갤러리 마커 데이터 전달\n\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n\n_s(MapTemplate, \"xuaff3rNUEZ5NgbI7Txezy3ZlpY=\", false, function () {\n  return [useQuery];\n});\n\n_c2 = MapTemplate;\nexport default MapTemplate;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"MapBox\");\n$RefreshReg$(_c2, \"MapTemplate\");","map":{"version":3,"names":["React","styled","KakaoMap","Marker","useQuery","fetchGalleryLocation","MapBox","div","fetchUserLocation","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","position","lat","coords","latitude","lng","longitude","err","Error","MapTemplate","data","userLocation","isError","locationError","isLoading","locationLoading","queryKey","queryFn","positions","markersLoading","isReady","message"],"sources":["/Users/andrew/Desktop/exhi/exhi/exhi-lover/client/src/component/map/MapTemplate.js"],"sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\nimport KakaoMap from \"./KaKaoMap\";\nimport Marker from \"./Marker\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { fetchGalleryLocation } from \"../../lib/api/Api\";\n\nconst MapBox = styled.div`\n  width: 100%;\n  align-items: center;\n  margin: 0;\n\n  @media (max-width: 560px) {\n    height: calc(110vw + 50px);\n  }\n\n  @media (min-width: 561px) {\n    height: 666px;\n  }\n`;\n\nconst fetchUserLocation = () => {\n  return new Promise((resolve, reject) => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          resolve({\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          });\n        },\n        (err) => {\n          reject(new Error(\"geolocation을 사용할 수 없어요.\"));\n        }\n      );\n    } else {\n      reject(new Error(\"geolocation을 지원하지 않습니다.\"));\n    }\n  });\n};\n\nconst MapTemplate = () => {\n  const {\n    data: userLocation,\n    isError: locationError,\n    isLoading: locationLoading,\n  } = useQuery({\n    queryKey: [\"userLocation\"],\n    queryFn: fetchUserLocation,\n  });\n\n  const { positions, isLoading: markersLoading } = Marker(); // Marker에서 positions과 로딩 상태 받아옴\n\n  const isReady = !locationLoading && !markersLoading && userLocation;\n\n  if (locationError) {\n    return <div>{locationError.message}</div>;\n  }\n\n  return (\n    <MapBox>\n      {isReady && (\n        <KakaoMap\n          lat={userLocation.lat}\n          lng={userLocation.lng}\n          galleriesMarker={positions} // 갤러리 마커 데이터 전달\n        />\n      )}\n    </MapBox>\n  );\n};\n\nexport default MapTemplate;\n"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAASC,QAAT,QAAyB,uBAAzB;AACA,SAASC,oBAAT,QAAqC,mBAArC;;AAEA,MAAMC,MAAM,GAAGL,MAAM,CAACM,GAAI;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAZA;KAAMD,M;;AAcN,MAAME,iBAAiB,GAAG,MAAM;EAC9B,OAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;IACtC,IAAIC,SAAS,CAACC,WAAd,EAA2B;MACzBD,SAAS,CAACC,WAAV,CAAsBC,kBAAtB,CACGC,QAAD,IAAc;QACZL,OAAO,CAAC;UACNM,GAAG,EAAED,QAAQ,CAACE,MAAT,CAAgBC,QADf;UAENC,GAAG,EAAEJ,QAAQ,CAACE,MAAT,CAAgBG;QAFf,CAAD,CAAP;MAID,CANH,EAOGC,GAAD,IAAS;QACPV,MAAM,CAAC,IAAIW,KAAJ,CAAU,yBAAV,CAAD,CAAN;MACD,CATH;IAWD,CAZD,MAYO;MACLX,MAAM,CAAC,IAAIW,KAAJ,CAAU,yBAAV,CAAD,CAAN;IACD;EACF,CAhBM,CAAP;AAiBD,CAlBD;;AAoBA,MAAMC,WAAW,GAAG,MAAM;EAAA;;EACxB,MAAM;IACJC,IAAI,EAAEC,YADF;IAEJC,OAAO,EAAEC,aAFL;IAGJC,SAAS,EAAEC;EAHP,IAIFzB,QAAQ,CAAC;IACX0B,QAAQ,EAAE,CAAC,cAAD,CADC;IAEXC,OAAO,EAAEvB;EAFE,CAAD,CAJZ;EASA,MAAM;IAAEwB,SAAF;IAAaJ,SAAS,EAAEK;EAAxB,IAA2C9B,MAAM,EAAvD,CAVwB,CAUmC;;EAE3D,MAAM+B,OAAO,GAAG,CAACL,eAAD,IAAoB,CAACI,cAArB,IAAuCR,YAAvD;;EAEA,IAAIE,aAAJ,EAAmB;IACjB,oBAAO;MAAA,UAAMA,aAAa,CAACQ;IAApB;MAAA;MAAA;MAAA;IAAA,QAAP;EACD;;EAED,oBACE,QAAC,MAAD;IAAA,UACGD,OAAO,iBACN,QAAC,QAAD;MACE,GAAG,EAAET,YAAY,CAACT,GADpB;MAEE,GAAG,EAAES,YAAY,CAACN,GAFpB;MAGE,eAAe,EAAEa,SAHnB,CAG8B;;IAH9B;MAAA;MAAA;MAAA;IAAA;EAFJ;IAAA;IAAA;IAAA;EAAA,QADF;AAWD,CA7BD;;GAAMT,W;UAKAnB,Q;;;MALAmB,W;AA+BN,eAAeA,WAAf"},"metadata":{},"sourceType":"module"}