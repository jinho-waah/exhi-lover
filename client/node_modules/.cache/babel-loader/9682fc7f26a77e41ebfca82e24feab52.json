{"ast":null,"code":"import _regeneratorRuntime from\"/Users/andrew/Desktop/exhi/exhi/exhi-lover/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/andrew/Desktop/exhi/exhi/exhi-lover/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/andrew/Desktop/exhi/exhi/exhi-lover/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import axios from\"axios\";import{fetchAllShows,fetchShowByShowId,fetchShowIdByTagId,fetchTagsIdbyShowId}from\"../../lib/api/Api\";function IdToShow(_ref){var TagItems=_ref.TagItems,selectedValue=_ref.selectedValue;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),shows=_useState2[0],setShows=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),tags=_useState4[0],setTags=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){var tagIdString=TagItems.join(\"&\");var fetchShows=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var showsIds,tagsId,getShowResponse,show,_showsIds,_tagsId;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(tagIdString!==\"\")){_context.next=24;break;}_context.prev=1;setError(null);_context.next=5;return fetchShowIdByTagId(tagIdString);case 5:showsIds=_context.sent;console.log(\"1\",showsIds);_context.next=9;return fetchTagsIdbyShowId(showsIds);case 9:tagsId=_context.sent;console.log(\"2\",tagsId);setTags(tagsId);_context.next=14;return fetchShowByShowId(showsIds);case 14:getShowResponse=_context.sent;console.log(\"3\",getShowResponse);setShows(getShowResponse);_context.next=22;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](1);setError(_context.t0);case 22:_context.next=33;break;case 24:_context.next=26;return fetchAllShows(selectedValue);case 26:show=_context.sent;_showsIds=show.map(function(show){return show.id;}).join(\"&\");_context.next=30;return fetchTagsIdbyShowId(_showsIds);case 30:_tagsId=_context.sent;setShows(show);setTags(_tagsId);case 33:case\"end\":return _context.stop();}}},_callee,null,[[1,19]]);}));return function fetchShows(){return _ref2.apply(this,arguments);};}();fetchShows();},[TagItems]);return{shows:shows,tags:tags};}export default IdToShow;","map":{"version":3,"names":["useState","useEffect","axios","fetchAllShows","fetchShowByShowId","fetchShowIdByTagId","fetchTagsIdbyShowId","IdToShow","TagItems","selectedValue","shows","setShows","tags","setTags","error","setError","tagIdString","join","fetchShows","showsIds","console","log","tagsId","getShowResponse","show","map","id"],"sources":["/Users/andrew/Desktop/exhi/exhi/exhi-lover/client/src/component/hashtag/IdToShow.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport {\n  fetchAllShows,\n  fetchShowByShowId,\n  fetchShowIdByTagId,\n  fetchTagsIdbyShowId,\n} from \"../../lib/api/Api\";\n\nfunction IdToShow({ TagItems, selectedValue }) {\n  const [shows, setShows] = useState(null);\n  const [tags, setTags] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const tagIdString = TagItems.join(\"&\");\n    const fetchShows = async () => {\n      if (tagIdString !== \"\") {\n        try {\n          setError(null);\n          const showsIds = await fetchShowIdByTagId(tagIdString);\n          console.log(\"1\", showsIds);\n          const tagsId = await fetchTagsIdbyShowId(showsIds);\n          console.log(\"2\", tagsId);\n          setTags(tagsId);\n          const getShowResponse = await fetchShowByShowId(showsIds);\n          console.log(\"3\", getShowResponse);\n          setShows(getShowResponse);\n        } catch (e) {\n          setError(e);\n        }\n      } else {\n        const show = await fetchAllShows(selectedValue);\n        const showsIds = show.map((show) => show.id).join(\"&\");\n        const tagsId = await fetchTagsIdbyShowId(showsIds);\n        setShows(show);\n        setTags(tagsId);\n      }\n    };\n\n    fetchShows();\n  }, [TagItems]);\n\n  return { shows, tags };\n}\n\nexport default IdToShow;\n"],"mappings":"qaAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OACEC,aADF,CAEEC,iBAFF,CAGEC,kBAHF,CAIEC,mBAJF,KAKO,mBALP,CAOA,QAASC,SAAT,MAA+C,IAA3BC,SAA2B,MAA3BA,QAA2B,CAAjBC,aAAiB,MAAjBA,aAAiB,CAC7C,cAA0BT,QAAQ,CAAC,IAAD,CAAlC,wCAAOU,KAAP,eAAcC,QAAd,eACA,eAAwBX,QAAQ,CAAC,IAAD,CAAhC,yCAAOY,IAAP,eAAaC,OAAb,eACA,eAA0Bb,QAAQ,CAAC,IAAD,CAAlC,yCAAOc,KAAP,eAAcC,QAAd,eAEAd,SAAS,CAAC,UAAM,CACd,GAAMe,YAAW,CAAGR,QAAQ,CAACS,IAAT,CAAc,GAAd,CAApB,CACA,GAAMC,WAAU,6FAAG,qMACbF,WAAW,GAAK,EADH,2CAGbD,QAAQ,CAAC,IAAD,CAAR,CAHa,sBAIUV,mBAAkB,CAACW,WAAD,CAJ5B,QAIPG,QAJO,eAKbC,OAAO,CAACC,GAAR,CAAY,GAAZ,CAAiBF,QAAjB,EALa,sBAMQb,oBAAmB,CAACa,QAAD,CAN3B,QAMPG,MANO,eAObF,OAAO,CAACC,GAAR,CAAY,GAAZ,CAAiBC,MAAjB,EACAT,OAAO,CAACS,MAAD,CAAP,CARa,uBASiBlB,kBAAiB,CAACe,QAAD,CATlC,SASPI,eATO,eAUbH,OAAO,CAACC,GAAR,CAAY,GAAZ,CAAiBE,eAAjB,EACAZ,QAAQ,CAACY,eAAD,CAAR,CAXa,iFAabR,QAAQ,aAAR,CAba,8DAgBIZ,cAAa,CAACM,aAAD,CAhBjB,SAgBTe,IAhBS,eAiBTL,SAjBS,CAiBEK,IAAI,CAACC,GAAL,CAAS,SAACD,IAAD,QAAUA,KAAI,CAACE,EAAf,EAAT,EAA4BT,IAA5B,CAAiC,GAAjC,CAjBF,wBAkBMX,oBAAmB,CAACa,SAAD,CAlBzB,SAkBTG,OAlBS,eAmBfX,QAAQ,CAACa,IAAD,CAAR,CACAX,OAAO,CAACS,OAAD,CAAP,CApBe,qEAAH,kBAAVJ,WAAU,2CAAhB,CAwBAA,UAAU,GACX,CA3BQ,CA2BN,CAACV,QAAD,CA3BM,CAAT,CA6BA,MAAO,CAAEE,KAAK,CAALA,KAAF,CAASE,IAAI,CAAJA,IAAT,CAAP,CACD,CAED,cAAeL,SAAf"},"metadata":{},"sourceType":"module"}