{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { database } from \"./Tags\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport colorSet from \"../../lib/styles/colorSet\";\nimport TagsCheckBox from \"./TagsCheckBox\";\nimport HorizontalLine from \"../common/HorizontalLine\";\nimport PostTemplate from \"../post/PostTemplate\";\n\nfunction IdToShow(_ref) {\n  _s();\n\n  let {\n    TagItems\n  } = _ref;\n  const [tagIdsUrl, setTagIdsUrl] = useState(\"\");\n  const [showsId, setShowsId] = useState(null);\n  const [tags, setTags] = useState(null);\n  const [tagsId, setTagsId] = useState(null);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const tagObject = TagItems.reduce((acc, tagName) => {\n      if (database.hasOwnProperty(tagName)) {\n        acc[tagName] = database[tagName];\n      }\n\n      return acc;\n    }, {});\n    const tagIds = Object.values(tagObject).filter(value => typeof value === \"number\");\n    const tagIdsString = tagIds.join(\"&\");\n    tagIds.sort((a, b) => a - b);\n    const url = tagIdsString ? `/api/exhibition_showId/${tagIdsString}` : \"/api/shows\";\n\n    const fetchShowsId = async () => {\n      try {\n        setError(null);\n        setShowsId(null);\n\n        if (tagIdsUrl !== \"\") {\n          // const response = await axios.get(`https://exhi-lover.com${tagIdsUrl}`);\n          const response = await axios.get(`http://localhost:5100${tagIdsUrl}`);\n          setShowsId(response.data);\n        }\n      } catch (e) {\n        setError(e);\n      }\n    };\n\n    const fetchShow = async () => {\n      try {} catch (e) {}\n    };\n\n    const fetchTagsId = async () => {\n      try {\n        setError(null);\n        const tagsIdData = await Promise.all(shows.map(async show => {\n          const url = `/api/exhibition_tags/${show.id}`; // const response = await axios.get(`https://exhi-lover.com${url}`);\n\n          const response = await axios.get(`http://localhost:5100${url}`);\n          return response.data;\n        }));\n\n        if (tagsIdData.length > 0) {\n          const tagsIdArray = tagsIdData.reduce((acc, innerArray) => {\n            innerArray.forEach(row => {\n              const {\n                exhibition_id,\n                tag_id\n              } = row;\n              const index = acc.findIndex(obj => obj.exhibition_id === exhibition_id);\n\n              if (index === -1) {\n                acc.push({\n                  exhibition_id,\n                  tags: [tag_id]\n                });\n              } else {\n                acc[index].tags.push(tag_id);\n              }\n            });\n            return acc;\n          }, []);\n          setTagsId(tagsIdArray);\n        }\n      } catch (e) {\n        setError(e);\n      }\n    };\n\n    setTagIdsUrl(url);\n    fetchShowsId();\n    fetchTagsId();\n  }, [TagItems, tagIdsUrl]);\n  return showsId, null;\n}\n\n_s(IdToShow, \"GNHOcZC5wIWty1PJdR6CdMaByIM=\");\n\n_c = IdToShow;\nexport default IdToShow;\n\nvar _c;\n\n$RefreshReg$(_c, \"IdToShow\");","map":{"version":3,"names":["useState","useEffect","database","styled","axios","colorSet","TagsCheckBox","HorizontalLine","PostTemplate","IdToShow","TagItems","tagIdsUrl","setTagIdsUrl","showsId","setShowsId","tags","setTags","tagsId","setTagsId","error","setError","tagObject","reduce","acc","tagName","hasOwnProperty","tagIds","Object","values","filter","value","tagIdsString","join","sort","a","b","url","fetchShowsId","response","get","data","e","fetchShow","fetchTagsId","tagsIdData","Promise","all","shows","map","show","id","length","tagsIdArray","innerArray","forEach","row","exhibition_id","tag_id","index","findIndex","obj","push"],"sources":["/Users/andrew/Desktop/exhi/exhi/client/src/component/hashtag/IdToShow.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { database } from \"./Tags\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport colorSet from \"../../lib/styles/colorSet\";\nimport TagsCheckBox from \"./TagsCheckBox\";\nimport HorizontalLine from \"../common/HorizontalLine\";\nimport PostTemplate from \"../post/PostTemplate\";\n\nfunction IdToShow({ TagItems }) {\n  const [tagIdsUrl, setTagIdsUrl] = useState(\"\");\n  const [showsId, setShowsId] = useState(null);\n  const [tags, setTags] = useState(null);\n  const [tagsId, setTagsId] = useState(null);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const tagObject = TagItems.reduce((acc, tagName) => {\n      if (database.hasOwnProperty(tagName)) {\n        acc[tagName] = database[tagName];\n      }\n      return acc;\n    }, {});\n    const tagIds = Object.values(tagObject).filter(\n      (value) => typeof value === \"number\"\n    );\n    const tagIdsString = tagIds.join(\"&\");\n    tagIds.sort((a, b) => a - b);\n    const url = tagIdsString\n      ? `/api/exhibition_showId/${tagIdsString}`\n      : \"/api/shows\";\n\n    const fetchShowsId = async () => {\n      try {\n        setError(null);\n        setShowsId(null);\n        if (tagIdsUrl !== \"\") {\n          // const response = await axios.get(`https://exhi-lover.com${tagIdsUrl}`);\n          const response = await axios.get(`http://localhost:5100${tagIdsUrl}`);\n          setShowsId(response.data);\n        }\n      } catch (e) {\n        setError(e);\n      }\n    };\n    const fetchShow = async () => {\n      try {\n      } catch (e) {}\n    };\n    const fetchTagsId = async () => {\n      try {\n        setError(null);\n        const tagsIdData = await Promise.all(\n          shows.map(async (show) => {\n            const url = `/api/exhibition_tags/${show.id}`;\n            // const response = await axios.get(`https://exhi-lover.com${url}`);\n            const response = await axios.get(`http://localhost:5100${url}`);\n            return response.data;\n          })\n        );\n        if (tagsIdData.length > 0) {\n          const tagsIdArray = tagsIdData.reduce((acc, innerArray) => {\n            innerArray.forEach((row) => {\n              const { exhibition_id, tag_id } = row;\n              const index = acc.findIndex(\n                (obj) => obj.exhibition_id === exhibition_id\n              );\n              if (index === -1) {\n                acc.push({ exhibition_id, tags: [tag_id] });\n              } else {\n                acc[index].tags.push(tag_id);\n              }\n            });\n            return acc;\n          }, []);\n          setTagsId(tagsIdArray);\n        }\n      } catch (e) {\n        setError(e);\n      }\n    };\n\n    setTagIdsUrl(url);\n    fetchShowsId();\n    fetchTagsId();\n  }, [TagItems, tagIdsUrl]);\n\n  return showsId, null;\n}\n\nexport default IdToShow;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}