{"ast":null,"code":"import _regeneratorRuntime from\"/Users/andrew/Desktop/exhi/exhi/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/andrew/Desktop/exhi/exhi/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/andrew/Desktop/exhi/exhi/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useState,useEffect}from\"react\";import styled from\"styled-components\";import axios from\"axios\";import colorSet from\"../../lib/styles/colorSet\";import TagsCheckBox from\"./TagsCheckBox\";import HorizontalLine from\"../common/HorizontalLine\";import PostTemplate from\"../post/PostTemplate\";function IdToShow(_ref){var TagItems=_ref.TagItems;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),shows=_useState2[0],setShows=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];useEffect(function(){var tagIdString=TagItems.join(\"&\");var url=tagIdString?\"/api/exhibition_tags/tags/\".concat(tagIdString):\"/api/shows\";var fetchShows=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var getShowIdResponse,showIds,getShowResponse,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(url!==\"/api/shows\")){_context.next=18;break;}_context.prev=1;setError(null);// const getShowIdResponse = await axios.get(`https://exhi-lover.com${url}`);\n_context.next=5;return axios.get(\"http://localhost:5100\".concat(url));case 5:getShowIdResponse=_context.sent;showIds=getShowIdResponse.data.map(function(i){return parseInt(i.exhibition_id);}).sort(function(a,b){return a-b;}).join(\"&\");// const getShowResponse = await axios.get(\n//   `https://exhi-lover.com/api/shows/id/${showIds}`\n// );\n_context.next=9;return axios.get(\"http://localhost:5100/api/shows/id/\".concat(showIds));case 9:getShowResponse=_context.sent;setShows(getShowResponse.data);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);setError(_context.t0);case 16:_context.next=22;break;case 18:_context.next=20;return axios.get(\"http://localhost:5100\".concat(url));case 20:response=_context.sent;setShows(response.data);case 22:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return function fetchShows(){return _ref2.apply(this,arguments);};}();fetchShows();},[TagItems]);return{shows:shows};}export default IdToShow;","map":{"version":3,"names":["React","useState","useEffect","styled","axios","colorSet","TagsCheckBox","HorizontalLine","PostTemplate","IdToShow","TagItems","shows","setShows","error","setError","tagIdString","join","url","fetchShows","get","getShowIdResponse","showIds","data","map","i","parseInt","exhibition_id","sort","a","b","getShowResponse","response"],"sources":["/Users/andrew/Desktop/exhi/exhi/client/src/component/hashtag/IdToShow.js"],"sourcesContent":["import React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport colorSet from \"../../lib/styles/colorSet\";\nimport TagsCheckBox from \"./TagsCheckBox\";\nimport HorizontalLine from \"../common/HorizontalLine\";\nimport PostTemplate from \"../post/PostTemplate\";\n\nfunction IdToShow({ TagItems }) {\n  const [shows, setShows] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const tagIdString = TagItems.join(\"&\");\n    const url = tagIdString\n      ? `/api/exhibition_tags/tags/${tagIdString}`\n      : \"/api/shows\";\n    const fetchShows = async () => {\n      if (url !== \"/api/shows\") {\n        try {\n          setError(null);\n          // const getShowIdResponse = await axios.get(`https://exhi-lover.com${url}`);\n          const getShowIdResponse = await axios.get(\n            `http://localhost:5100${url}`\n          );\n          const showIds = getShowIdResponse.data\n            .map((i) => parseInt(i.exhibition_id))\n            .sort((a, b) => a - b)\n            .join(\"&\");\n          // const getShowResponse = await axios.get(\n          //   `https://exhi-lover.com/api/shows/id/${showIds}`\n          // );\n          const getShowResponse = await axios.get(\n            `http://localhost:5100/api/shows/id/${showIds}`\n          );\n          setShows(getShowResponse.data);\n        } catch (e) {\n          setError(e);\n        }\n      } else {\n        //const response = await axios.get(`http://exhi-love.com${url}`);\n        const response = await axios.get(`http://localhost:5100${url}`);\n        setShows(response.data);\n      }\n    };\n\n    fetchShows();\n  }, [TagItems]);\n\n  return { shows };\n}\n\nexport default IdToShow;\n"],"mappings":"oYAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,OAAP,KAAmB,mBAAnB,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,SAAP,KAAqB,2BAArB,CACA,MAAOC,aAAP,KAAyB,gBAAzB,CACA,MAAOC,eAAP,KAA2B,0BAA3B,CACA,MAAOC,aAAP,KAAyB,sBAAzB,CAEA,QAASC,SAAT,MAAgC,IAAZC,SAAY,MAAZA,QAAY,CAC9B,cAA0BT,QAAQ,CAAC,IAAD,CAAlC,wCAAOU,KAAP,eAAcC,QAAd,eACA,eAA0BX,QAAQ,CAAC,IAAD,CAAlC,yCAAOY,KAAP,eAAcC,QAAd,eAEAZ,SAAS,CAAC,UAAM,CACd,GAAMa,YAAW,CAAGL,QAAQ,CAACM,IAAT,CAAc,GAAd,CAApB,CACA,GAAMC,IAAG,CAAGF,WAAW,qCACUA,WADV,EAEnB,YAFJ,CAGA,GAAMG,WAAU,6FAAG,iMACbD,GAAG,GAAK,YADK,2CAGbH,QAAQ,CAAC,IAAD,CAAR,CACA;AAJa,sBAKmBV,MAAK,CAACe,GAAN,gCACNF,GADM,EALnB,QAKPG,iBALO,eAQPC,OARO,CAQGD,iBAAiB,CAACE,IAAlB,CACbC,GADa,CACT,SAACC,CAAD,QAAOC,SAAQ,CAACD,CAAC,CAACE,aAAH,CAAf,EADS,EAEbC,IAFa,CAER,SAACC,CAAD,CAAIC,CAAJ,QAAUD,EAAC,CAAGC,CAAd,EAFQ,EAGbb,IAHa,CAGR,GAHQ,CARH,CAYb;AACA;AACA;AAda,sBAeiBZ,MAAK,CAACe,GAAN,8CACUE,OADV,EAfjB,QAePS,eAfO,eAkBblB,QAAQ,CAACkB,eAAe,CAACR,IAAjB,CAAR,CAlBa,iFAoBbR,QAAQ,aAAR,CApBa,8DAwBQV,MAAK,CAACe,GAAN,gCAAkCF,GAAlC,EAxBR,SAwBTc,QAxBS,eAyBfnB,QAAQ,CAACmB,QAAQ,CAACT,IAAV,CAAR,CAzBe,qEAAH,kBAAVJ,WAAU,2CAAhB,CA6BAA,UAAU,GACX,CAnCQ,CAmCN,CAACR,QAAD,CAnCM,CAAT,CAqCA,MAAO,CAAEC,KAAK,CAALA,KAAF,CAAP,CACD,CAED,cAAeF,SAAf"},"metadata":{},"sourceType":"module"}