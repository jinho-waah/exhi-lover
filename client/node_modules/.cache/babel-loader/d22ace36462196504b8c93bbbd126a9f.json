{"ast":null,"code":"var _s2 = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { database } from \"./Tags\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport colorSet from \"../../lib/styles/colorSet\";\nimport TagsCheckBox from \"./TagsCheckBox\";\nimport HorizontalLine from \"../common/HorizontalLine\";\nimport PostTemplate from \"../post/PostTemplate\";\n\nfunction IdToShow(_ref) {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  let {\n    TagItems\n  } = _ref;\n  const [tagIdsUrl, setTagIdsUrl] = useState(\"\");\n  const [showsId, setShowsId] = useState(null);\n  const [tags, setTags] = useState(null);\n  const [tagsId, setTagsId] = useState(null);\n  const [error, setError] = useState(null);\n\n  _s(useEffect(_s(() => {\n    _s();\n\n    const tagObject = TagItems.reduce((acc, tagName) => {\n      if (database.hasOwnProperty(tagName)) {\n        acc[tagName] = database[tagName];\n      }\n\n      return acc;\n    }, {});\n    const tagIds = Object.values(tagObject).filter(value => typeof value === \"number\");\n    const tagIdsString = tagIds.join(\"&\");\n    tagIds.sort((a, b) => a - b);\n    const url = tagIdsString ? `/api/exhibition_showId/${tagIdsString}` : \"/api/shows\";\n\n    const fetchShowsId = async () => {\n      try {\n        setError(null);\n        setShowsId(null);\n\n        if (tagIdsUrl !== \"\") {\n          // const response = await axios.get(`https://exhi-lover.com${tagIdsUrl}`);\n          const response = await axios.get(`http://localhost:5100${tagIdsUrl}`);\n          setShowsId(response.data);\n        }\n      } catch (e) {\n        setError(e);\n      }\n    };\n\n    const fetchShow = async () => {\n      try {} catch (e) {}\n    };\n\n    useEffect(() => {\n      const fetchTag = async () => {\n        try {\n          setError(null);\n          const tagData = await Promise.all(tagsId.map(async _ref2 => {\n            let {\n              exhibition_id,\n              tags\n            } = _ref2;\n            const tagNames = await Promise.all(tags.map(async tagId => {\n              const url = `/api/tags/${tagId}`;\n              const response = await axios.get(`http://localhost:5100${url}`);\n              return response.data[0].tag_name;\n            }));\n            return {\n              exhibition_id,\n              tagNames\n            };\n          }));\n          setTags(tagData.reduce((acc, _ref3) => {\n            let {\n              exhibition_id,\n              tagNames\n            } = _ref3;\n            acc[exhibition_id] = tagNames;\n            return acc;\n          }, {}));\n        } catch (e) {\n          setError(e);\n        }\n      };\n\n      if (tagsId !== null) {\n        fetchTag();\n      }\n    }, [tagsId]);\n    setTagIdsUrl(url);\n    fetchShowsId();\n  }, \"OD7bBpZva5O2jO+Puf00hKivP7c=\"), [TagItems, tagIdsUrl, tagsId]), \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n  return showsId, tags;\n}\n\n_s2(IdToShow, \"GNHOcZC5wIWty1PJdR6CdMaByIM=\");\n\n_c = IdToShow;\nexport default IdToShow;\n\nvar _c;\n\n$RefreshReg$(_c, \"IdToShow\");","map":{"version":3,"names":["useState","useEffect","database","styled","axios","colorSet","TagsCheckBox","HorizontalLine","PostTemplate","IdToShow","TagItems","tagIdsUrl","setTagIdsUrl","showsId","setShowsId","tags","setTags","tagsId","setTagsId","error","setError","tagObject","reduce","acc","tagName","hasOwnProperty","tagIds","Object","values","filter","value","tagIdsString","join","sort","a","b","url","fetchShowsId","response","get","data","e","fetchShow","fetchTag","tagData","Promise","all","map","exhibition_id","tagNames","tagId","tag_name"],"sources":["/Users/andrew/Desktop/exhi/exhi/client/src/component/hashtag/IdToShow.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { database } from \"./Tags\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport colorSet from \"../../lib/styles/colorSet\";\nimport TagsCheckBox from \"./TagsCheckBox\";\nimport HorizontalLine from \"../common/HorizontalLine\";\nimport PostTemplate from \"../post/PostTemplate\";\n\nfunction IdToShow({ TagItems }) {\n  const [tagIdsUrl, setTagIdsUrl] = useState(\"\");\n  const [showsId, setShowsId] = useState(null);\n  const [tags, setTags] = useState(null);\n  const [tagsId, setTagsId] = useState(null);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const tagObject = TagItems.reduce((acc, tagName) => {\n      if (database.hasOwnProperty(tagName)) {\n        acc[tagName] = database[tagName];\n      }\n      return acc;\n    }, {});\n    const tagIds = Object.values(tagObject).filter(\n      (value) => typeof value === \"number\"\n    );\n    const tagIdsString = tagIds.join(\"&\");\n    tagIds.sort((a, b) => a - b);\n    const url = tagIdsString\n      ? `/api/exhibition_showId/${tagIdsString}`\n      : \"/api/shows\";\n\n    const fetchShowsId = async () => {\n      try {\n        setError(null);\n        setShowsId(null);\n        if (tagIdsUrl !== \"\") {\n          // const response = await axios.get(`https://exhi-lover.com${tagIdsUrl}`);\n          const response = await axios.get(`http://localhost:5100${tagIdsUrl}`);\n          setShowsId(response.data);\n        }\n      } catch (e) {\n        setError(e);\n      }\n    };\n    const fetchShow = async () => {\n      try {\n      } catch (e) {}\n    };\n    useEffect(() => {\n      const fetchTag = async () => {\n        try {\n          setError(null);\n          const tagData = await Promise.all(\n            tagsId.map(async ({ exhibition_id, tags }) => {\n              const tagNames = await Promise.all(\n                tags.map(async (tagId) => {\n                  const url = `/api/tags/${tagId}`;\n                  const response = await axios.get(\n                    `http://localhost:5100${url}`\n                  );\n                  return response.data[0].tag_name;\n                })\n              );\n              return { exhibition_id, tagNames };\n            })\n          );\n          setTags(\n            tagData.reduce((acc, { exhibition_id, tagNames }) => {\n              acc[exhibition_id] = tagNames;\n              return acc;\n            }, {})\n          );\n        } catch (e) {\n          setError(e);\n        }\n      };\n\n      if (tagsId !== null) {\n        fetchTag();\n      }\n    }, [tagsId]);\n    setTagIdsUrl(url);\n    fetchShowsId();\n  }, [TagItems, tagIdsUrl, tagsId]);\n\n  return showsId, tags;\n}\n\nexport default IdToShow;\n"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,QAAT,QAAyB,QAAzB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,2BAArB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,cAAP,MAA2B,0BAA3B;AACA,OAAOC,YAAP,MAAyB,sBAAzB;;AAEA,SAASC,QAAT,OAAgC;EAAA;;EAAA;;EAAA,IAAd;IAAEC;EAAF,CAAc;EAC9B,MAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BZ,QAAQ,CAAC,EAAD,CAA1C;EACA,MAAM,CAACa,OAAD,EAAUC,UAAV,IAAwBd,QAAQ,CAAC,IAAD,CAAtC;EACA,MAAM,CAACe,IAAD,EAAOC,OAAP,IAAkBhB,QAAQ,CAAC,IAAD,CAAhC;EACA,MAAM,CAACiB,MAAD,EAASC,SAAT,IAAsBlB,QAAQ,CAAC,IAAD,CAApC;EACA,MAAM,CAACmB,KAAD,EAAQC,QAAR,IAAoBpB,QAAQ,CAAC,IAAD,CAAlC;;EACA,GAAAC,SAAS,IAAC,MAAM;IAAA;;IACd,MAAMoB,SAAS,GAAGX,QAAQ,CAACY,MAAT,CAAgB,CAACC,GAAD,EAAMC,OAAN,KAAkB;MAClD,IAAItB,QAAQ,CAACuB,cAAT,CAAwBD,OAAxB,CAAJ,EAAsC;QACpCD,GAAG,CAACC,OAAD,CAAH,GAAetB,QAAQ,CAACsB,OAAD,CAAvB;MACD;;MACD,OAAOD,GAAP;IACD,CALiB,EAKf,EALe,CAAlB;IAMA,MAAMG,MAAM,GAAGC,MAAM,CAACC,MAAP,CAAcP,SAAd,EAAyBQ,MAAzB,CACZC,KAAD,IAAW,OAAOA,KAAP,KAAiB,QADf,CAAf;IAGA,MAAMC,YAAY,GAAGL,MAAM,CAACM,IAAP,CAAY,GAAZ,CAArB;IACAN,MAAM,CAACO,IAAP,CAAY,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,GAAGC,CAA1B;IACA,MAAMC,GAAG,GAAGL,YAAY,GACnB,0BAAyBA,YAAa,EADnB,GAEpB,YAFJ;;IAIA,MAAMM,YAAY,GAAG,YAAY;MAC/B,IAAI;QACFjB,QAAQ,CAAC,IAAD,CAAR;QACAN,UAAU,CAAC,IAAD,CAAV;;QACA,IAAIH,SAAS,KAAK,EAAlB,EAAsB;UACpB;UACA,MAAM2B,QAAQ,GAAG,MAAMlC,KAAK,CAACmC,GAAN,CAAW,wBAAuB5B,SAAU,EAA5C,CAAvB;UACAG,UAAU,CAACwB,QAAQ,CAACE,IAAV,CAAV;QACD;MACF,CARD,CAQE,OAAOC,CAAP,EAAU;QACVrB,QAAQ,CAACqB,CAAD,CAAR;MACD;IACF,CAZD;;IAaA,MAAMC,SAAS,GAAG,YAAY;MAC5B,IAAI,CACH,CADD,CACE,OAAOD,CAAP,EAAU,CAAE;IACf,CAHD;;IAIAxC,SAAS,CAAC,MAAM;MACd,MAAM0C,QAAQ,GAAG,YAAY;QAC3B,IAAI;UACFvB,QAAQ,CAAC,IAAD,CAAR;UACA,MAAMwB,OAAO,GAAG,MAAMC,OAAO,CAACC,GAAR,CACpB7B,MAAM,CAAC8B,GAAP,CAAW,eAAmC;YAAA,IAA5B;cAAEC,aAAF;cAAiBjC;YAAjB,CAA4B;YAC5C,MAAMkC,QAAQ,GAAG,MAAMJ,OAAO,CAACC,GAAR,CACrB/B,IAAI,CAACgC,GAAL,CAAS,MAAOG,KAAP,IAAiB;cACxB,MAAMd,GAAG,GAAI,aAAYc,KAAM,EAA/B;cACA,MAAMZ,QAAQ,GAAG,MAAMlC,KAAK,CAACmC,GAAN,CACpB,wBAAuBH,GAAI,EADP,CAAvB;cAGA,OAAOE,QAAQ,CAACE,IAAT,CAAc,CAAd,EAAiBW,QAAxB;YACD,CAND,CADqB,CAAvB;YASA,OAAO;cAAEH,aAAF;cAAiBC;YAAjB,CAAP;UACD,CAXD,CADoB,CAAtB;UAcAjC,OAAO,CACL4B,OAAO,CAACtB,MAAR,CAAe,CAACC,GAAD,YAAsC;YAAA,IAAhC;cAAEyB,aAAF;cAAiBC;YAAjB,CAAgC;YACnD1B,GAAG,CAACyB,aAAD,CAAH,GAAqBC,QAArB;YACA,OAAO1B,GAAP;UACD,CAHD,EAGG,EAHH,CADK,CAAP;QAMD,CAtBD,CAsBE,OAAOkB,CAAP,EAAU;UACVrB,QAAQ,CAACqB,CAAD,CAAR;QACD;MACF,CA1BD;;MA4BA,IAAIxB,MAAM,KAAK,IAAf,EAAqB;QACnB0B,QAAQ;MACT;IACF,CAhCQ,EAgCN,CAAC1B,MAAD,CAhCM,CAAT;IAiCAL,YAAY,CAACwB,GAAD,CAAZ;IACAC,YAAY;EACb,CApEQ,mCAoEN,CAAC3B,QAAD,EAAWC,SAAX,EAAsBM,MAAtB,CApEM,CAAT;;EAsEA,OAAOJ,OAAO,EAAEE,IAAhB;AACD;;IA7EQN,Q;;KAAAA,Q;AA+ET,eAAeA,QAAf"},"metadata":{},"sourceType":"module"}